{"version":3,"sources":["data/posts lazy /^/.//.*/.json$/ groupOptions: {} namespace object","config sync /^/.//.*$","components/App/index.js","components/Topbar/Hex.js","components/Topbar/HoneycombMenu.js","components/Topbar/index.js","components/Home/About.js","components/common/PostListItem.js","components/Home/BlogPosts.js","components/Home/index.js","components/Editor/icons/editor/highlighted.js","components/Editor/icons/editor/bold.js","components/Editor/icons/editor/italic.js","components/Editor/icons/editor/underline.js","components/Editor/icons/editor/link.js","components/Editor/icons/editor/bullets.js","components/Editor/icons/editor/numbering.js","components/Editor/icons/editor/code.js","components/Editor/icons/editor/blockquote.js","components/Editor/icons/editor/image.js","components/Editor/icons/editor/video.js","components/Editor/icons/editor/QnALink.js","components/Editor/icons/editor/FontSizeCtrl.js","components/Editor/icons/editor/InlineCode.js","components/Editor/Toolbar/InlineCtrls.js","components/Editor/Toolbar/BlockCtrls.js","components/Editor/constants.js","components/Editor/Toolbar/SpecialCtrls/styled.js","components/Editor/Toolbar/SpecialCtrls/Ctrl.js","components/Editor/Toolbar/SpecialCtrls/LinkCtrl.js","components/Editor/decorators/MultiDecorator.js","components/Editor/decorators/composable/video.js","components/Editor/decorators/composable/link.js","components/Editor/decorators/composable/image.js","components/Editor/decorators/composable/inlineCode.js","components/Editor/decorators/composable/index.js","components/Editor/decorators/custom/index.js","components/Editor/decorators/custom/code/index.js","components/Editor/decorators/index.js","components/Editor/model.js","components/Editor/Toolbar/SpecialCtrls/ImageCtrl.js","components/Editor/utils/checkEmbeds.js","components/Editor/Toolbar/SpecialCtrls/VideoCtrl.js","components/Editor/Toolbar/SpecialCtrls/QnACtrl.js","components/Editor/Toolbar/SpecialCtrls/controls.js","components/Editor/Toolbar/SpecialCtrls/index.js","components/Editor/Toolbar/index.js","components/Editor/components/blocks/ImageEmbed.js","components/Editor/icons/community/index.js","components/Editor/components/blocks/QnAEmbed.js","components/Editor/components/blocks/VideoEmbed.js","components/Editor/components/blocks/Blockquote.js","components/Editor/components/Popper/styled.js","components/Editor/components/Popper/index.js","components/Editor/components/blocks/CodeBlockWrapper.js","components/Editor/utils/getBlockRendererFn.js","components/Editor/utils/getBlockRenderMap.js","components/Editor/utils/blockStyleFn.js","components/Editor/editor.js","components/Editor/index.js","components/PostEditor/index.js","components/NewPost/index.js","components/EditPost/index.js","components/ViewPost/Cover.js","components/ViewPost/index.js","components/PostList/index.js","routes.js","serviceWorker.js","index.js","config/index.js","config/default.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","webpackContext","webpackContextResolve","App","children","this","props","React","Component","Polygon","styled","polygon","Hex","state","loaded","renderHex","b","l","h","scale","origin","fill","stroke","onClick","polygonStyle","Comp","polygonComp","calcPoints","offset","x","y","points","style","transformOrigin","transform","centerPoint","join","_","isFunction","Children","toArray","child","cloneElement","setTimeout","setState","defaultProps","Container","div","Svg","svg","OpenMenuIcon","ThreeBars","CloseMenuIcon","Close","MenuContainer","show","Menu","prevProps","clearTimeout","timer","MenuItem","MenuHex","HoneycombMenu","vh","vw","menuOpen","updateWindowDimensions","window","innerWidth","innerHeight","toggleMenu","getHexScale","renderPartialHoneycomb","X","Y","Ox","Oy","fx","fy","pointOrigin","i","key","zIndex","size","className","renderFullHoneycomb","B","L","H","hexArea","totalScreenArea","Math","ceil","initialSameColTimes","dRowNo","pointsRow","startY","maxY","sameColTimes","j","point","row","push","length","rowNo","colorScale","chroma","pointRows","cloneDeep","pointRow","hex","excludePoints","concat","filter","some","addEventListener","removeEventListener","containerSize","w","height","width","viewBox","Content","Brand","Tagline","Dot","span","Topbar","onBrandClick","history","isLocal","get","document","to","withRouter","Wrapper","color","About","role","aria-label","PostListItem","Title","Subtitle","Summary","Link","Heading","BlogPosts","posts","items","page","total","openPost","require","post","title","summary","Home","highlighted","IconComponent","active","restProps","SVG","version","xmlns","d","Icon","CodeCurly","ControlsContainer","InlineStyleControls","getEditorState","setEditorState","editorState","inlineStyle","preventDefault","RichUtils","toggleInlineStyle","currentStyle","getCurrentInlineStyle","onMouseDown","has","Separator","BlockTypeControls","editorRef","selection","getSelection","currentBlockType","getCurrentContent","getBlockForKey","getStartKey","getType","blockType","toggleBlockType","focus","Block","UNSTYLED","PARAGRAPH","OL","UL","H1","H2","H3","H4","H5","H6","CODE","BLOCKQUOTE","PULLQUOTE","ATOMIC","BLOCKQUOTE_CAPTION","CAPTION","QNA","VIDEO","IMAGE","BREAK","HANDLED","NOT_HANDLED","DEFAULT_CODEBLOCK_LANG","TextInput","input","Button","button","UrlInput","valid","css","addDefaultUrlProtocol","url","startsWith","LinkCtrl","urlIsValid","onSubmit","getEmbedUrl","submitUrl","urlIdentifier","webUrl","validUrl","isUrl","embedUrlMatch","matched","data","renderUrlInput","placeholder","updateUrl","ref","el","value","onChange","required","ctrlKey","activeCtrl","onIconClick","inputPlaceholder","urlInput","icon","target","contentStateWithEntity","createEntity","href","entityKey","getLastCreatedEntityKey","newEditorState","EditorState","set","currentContent","toggleLink","nextProps","isCollapsed","contentState","startKey","startOffset","getStartOffset","linkKey","getEntityAt","getEntity","getData","LinkIcon","toggleCtrl","Ctrl","MultiDecorator","decorators","Immutable","List","block","decorations","Array","getText","forEach","decorator","getDecorations","getDecoratorForKey","getComponentForKey","getInnerKey","getPropsForKey","parts","split","index","Number","slice","IFrame","iframe","strategy","contentBlock","callback","findEntityRanges","character","component","src","frameBorder","allowFullScreen","Anchor","a","processUrl","replace","match","Img","img","alt","Code","videoDecorator","linkDecorator","imageDecorator","findStyleRanges","hasStyle","PrismDecorator","defaultSyntax","prism","Prism","render","type","CompositeDecorator","composableDecorators","customDecorators","createEditorState","content","defaultDecorators","createEmpty","ContentState","createFromText","entityMap","convertFromRaw","createWithContent","getDefaultBlockData","initialData","TODO","checked","getCurrentBlock","selectionState","addNewBlock","newType","blockMap","getBlockMap","currentBlock","getLength","newBlock","merge","newContentState","selectionAfter","resetBlockWithType","overrides","mergeDeep","anchorOffset","focusOffset","updateDataOfBlock","newData","getKey","addNewBlockAt","pivotBlockKey","newBlockType","blocksBefore","toSeq","takeUntil","v","blocksAfter","skipUntil","rest","newBlockKey","genKey","ContentBlock","text","characterList","depth","Map","newBlockMap","toOrderedMap","newContent","selectionBefore","anchorKey","focusKey","isBackward","ImageCtrl","ImageIcon","checkVideoEmbeds","videoInfo","videoUrlParser","parse","indexOf","mediaType","provider","create","format","checkQnaEmbeds","SUPPORTED_SE_SITES","urlRegex","RegExp","site","videoEmbeds","codeEmbeds","matchedProvider","embedRegex","codesandbox","jsfiddle","codepen","embedUrl","userId","entries","regex","matchGroups","checkCodeEmbeds","qnaEmbeds","VideoCtrl","VideoIcon","QnACtrl","QnAIcon","controls","SpecialControls","activeCtrlKey","onUrlSubmit","setActiveCtrl","renderControls","control","Toolbar","Caption","figcaption","CaptionPlaceholder","ImageEmbed","blockText","readOnly","blockProps","contentEditable","suppressContentEditableWarning","stackoverflow","serverfault","superuser","security","softwareengineering","askubuntu","ux","unix","math","apple","cstheory","android","graphicdesign","dba","codereview","cs","Tags","Tag","FlexSection","vertical","horizontal","CommunityLogo","setSrc","communityIcons","OriginalPoster","user","QnAEmbed","questionId","urlString","fetchQuestion","question","question_id","catch","console","error","questions","tags","link","owner","rel","tag","VideoEmbed","Quote","Blockquote","alignRight","Tip","withComponent","Popper","popper","contains","onClickOutside","isOpen","showTip","alignMenuRight","onMenuClick","DefaultMenu","SUPPORTED_LANGS","html","javascript","jsx","python","json","scala","clike","java","go","php","MenuBar","CustomMenu","CurrentLang","LangSelectButton","Btn","LangSelectItem","Item","CodeBlockWrapper","langPopperIsOpen","currentSyntax","toggleLangPopper","closeLangPopper","setSyntax","syntax","blockKeys","blockKey","firstBlockKey","langSelect","lang","langDisplay","getBlockRendererFn","editable","getBlockRenderMap","DefaultDraftBlockRenderMap","ImmutableMap","element","wrapper","CustomEditor","handleKeyCommand","command","newState","onUpArrow","getAnchorKey","firstBlock","getFirstBlock","firstBlockType","OrderedMap","blockBefore","getBlockBefore","newSelection","forceSelection","handleReturn","behavior","isSoftNewlineEvent","insertSoftNewline","altKey","metaKey","continuousBlocks","handlePastedText","es","Modifier","insertText","checkEmbeds","editor","blockRendererFn","blockRenderMap","blockStyleFn","Editor","wait","ms","CoverImagePreview","FormFeedback","marginBottom","PostEditor","saving","saved","saveError","publishing","published","publishError","unpublishing","unpublished","unpublishError","handleShortcuts","stopPropagation","save","publish","onSave","afterSave","coverImageUrl","plainText","getPlainText","ttr","readingTime","body","convertToRaw","response","message","onPublish","unpublish","onUnpublish","onTitleChange","onSummaryChange","onEditorChange","onCoverChange","log","textDecoration","Spinner","display","marginRight","Input","isString","rows","NewPost","axios","EditPost","params","patch","Image","CoverImage","Body","Header","ViewPost","getCurrentPost","postId","default","assign","scrollTo","isEmpty","Cover","DeletePost","Delete","PostList","fetchPosts","config","apiUrl","triggerEditPost","confirmDeletePost","confirm","deletePost","delete","confirmPublishAll","publishAll","padding","fontWeight","exact","path","Boolean","location","hostname","app","routes","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","envConfig","toLower","process","err","defaultConfig"],"mappings":"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","file":"static/js/main.7df9ab1e.chunk.js","sourcesContent":["var map = {\n\t\"./8-7wFZkQT.json\": [\n\t\t287,\n\t\t19\n\t],\n\t\"./81Fp5iHG5.json\": [\n\t\t288,\n\t\t20\n\t],\n\t\"./DT34C0b2y.json\": [\n\t\t289,\n\t\t21\n\t],\n\t\"./H7-oMZx0v.json\": [\n\t\t290,\n\t\t22\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 283;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./\": 45,\n\t\"./default\": 64,\n\t\"./default.js\": 64,\n\t\"./index\": 45,\n\t\"./index.js\": 45\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 284;","import React from 'react'\n\nclass App extends React.Component {\n  render() {\n    const { children } = this.props\n    return (\n      <>\n        {children}\n      </>\n    )\n  }\n}\n\nexport default App\n","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\n\nexport const Polygon = styled.polygon`\n  transform: scale(0);\n  transition: transform 0.4s ease-in;\n`\n\nclass Hex extends React.Component {\n  state = {\n    loaded: false\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.setState({ loaded: true })\n    })\n  }\n\n  renderHex = () => {\n    let { b, l, h, scale, origin, fill, stroke, children, onClick, polygonStyle, polygonComp } = this.props\n    const Comp = polygonComp\n    b = b * scale\n    l = l * scale\n    h = h * scale\n    const calcPoints = (offset = { x: 0, y: 0 }) => {\n      let points = [\n        [b, 0],\n        [0, l],\n        [b, 2 * l],\n        [b + h, 2 * l],\n        [2 * b + h, l],\n        [b + h, 0]\n      ]\n      points = points.map(\n        ([x, y]) => `${x + origin.x + offset.x} ${y + origin.y + offset.y}`\n      )\n      return points\n    }\n    const style = {\n      transformOrigin: `${origin.x + b + (h / 2)}px ${origin.y + h}px`,\n      ...polygonStyle\n    }\n    if (this.state.loaded) {\n      style.transform = 'scale(1)'\n    }\n    const points = calcPoints()\n    const centerPoint = {\n      x: (b + h / 2) + origin.x,\n      y: l + origin.y\n    }\n    return (\n      <>\n        {\n          (fill !== 'none' && stroke !== 'none') && (\n            <Comp points={calcPoints({ x: 2, y: 5 }).join(' ')} fill=\"#333\" style={style} />\n          )\n        }\n        <Comp\n          points={points.join(' ')}\n          fill={fill}\n          stroke={stroke}\n          style={style}\n          onClick={onClick}\n        />\n        {/* <text x={centerPoint.x} y={centerPoint.y} style={{ font: 'italic 13px sans-serif' }}>\n          {this.props.row}\n        </text> */}\n        {\n          _.isFunction(children) && (\n            React.Children.toArray(children({ centerPoint })).map(child => (\n              React.cloneElement(child, {\n                onClick,\n                style\n              })\n            ))\n          )\n        }\n      </>\n    )\n  }\n\n  render() {\n    return this.renderHex()\n  }\n}\nHex.defaultProps = {\n  b: 3,\n  l: 4,\n  h: 5,\n  scale: 9,\n  origin: { x: 0, y: 0 },\n  fill: '#ffd700',\n  stroke: '#0007',\n  onClick: () => {},\n  polygonStyle: {},\n  polygonComp: Polygon\n}\nHex.propTypes = {\n  b: PropTypes.number,\n  l: PropTypes.number,\n  h: PropTypes.number,\n  scale: PropTypes.number,\n  origin: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number\n  }),\n  fill: PropTypes.string,\n  stroke: PropTypes.string,\n  onClick: PropTypes.func,\n  polygonStyle: PropTypes.object, // eslint-disable-line\n  polygonComp: PropTypes.any // eslint-disable-line\n}\n\nexport default Hex\n","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport chroma from 'chroma-js'\nimport Hex, { Polygon } from './Hex'\nimport { ThreeBars } from 'styled-icons/octicons/ThreeBars'\nimport { Close } from 'styled-icons/material/Close'\n\nconst Container = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 999;\n`\nconst Svg = styled.svg`\n  overflow: visible;\n`\nconst OpenMenuIcon = styled(ThreeBars)`\n  position: absolute;\n  top: 60px;\n  left: 114px;\n  fill: #aaa;\n  cursor: pointer;\n  &:hover {\n    fill: #560bd0;\n  }\n  &:active {\n    fill: #000;\n  }\n`\nconst CloseMenuIcon = styled(Close)`\n  position: absolute;\n  top: 60px;\n  left: 114px;\n  fill: white;\n  cursor: pointer;\n`\nconst MenuContainer = styled.div`\n  position: absolute;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  margin-left: -132px;\n  display: ${({ show }) => show ? 'flex' : 'none'};\n  transition: opacity 1s ease-in;\n  opacity: ${({ show }) => show ? 1 : 0};\n`\nclass Menu extends React.Component {\n  state = {\n    show: false\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.show !== this.props.show) {\n      clearTimeout(this.timer)\n      if (this.props.show) {\n        this.timer = setTimeout(() => {\n          this.setState({ show: true })\n        }, 2)\n      } else {\n        this.setState({ show: false })\n      }\n    }\n  }\n  render() {\n    const { show } = this.state\n    const { children } = this.props\n    return (\n      <MenuContainer show={show}>\n        {children}\n      </MenuContainer>\n    )\n  }\n}\nconst MenuItem = styled.div`\n  color: #0008;\n  font-weight: bold;\n  font-size: 40px;\n  cursor: pointer;\n  letter-spacing: 3px;\n  margin-bottom: 12px;\n  line-height: 1.5;\n  &:hover {\n    text-decoration: underline;\n    color: #560bd0;\n  }\n`\nconst MenuHex = styled(Polygon)`\n  cursor: pointer;\n  &:hover + ${OpenMenuIcon} {\n    fill: #560bd0;\n  }\n  &:active + ${OpenMenuIcon} {\n    fill: #000;\n  }\n`\n\nclass HoneycombMenu extends React.Component {\n  state = {\n    vh: 0,\n    vw: 0,\n    menuOpen: false\n  }\n\n  componentDidMount() {\n    this.updateWindowDimensions()\n    window.addEventListener('resize', this.updateWindowDimensions)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions)\n  }\n\n  updateWindowDimensions = () => {\n    const vw = window.innerWidth\n    // const vw = (window.innerWidth > 1440) ? 1440 : window.innerWidth\n    const vh = window.innerHeight\n    this.setState({ vw, vh })\n  }\n\n  toggleMenu = () => {\n    this.setState({ menuOpen: !this.state.menuOpen })\n  }\n\n  getHexScale = () => {\n    const { vw } = this.state\n    if (vw > 600) return Hex.defaultProps.scale\n    if (vw > 500) return 7\n    if (vw > 450) return 6\n    if (vw > 400) return 5\n    return 4\n  }\n\n  renderPartialHoneycomb = () => {\n    const { menuOpen, vw } = this.state\n    const { l, b, h, origin } = Hex.defaultProps\n    const scale = this.getHexScale()\n    const B = scale * b\n    const H = scale * h\n    const L = scale * l\n    const X = B + H\n    const Y = L\n    const Ox = origin.x\n    const Oy = origin.y\n\n    const points = [\n      [-1, -1], [1, -1], [3, -1], [5, -1], [0, 0],\n      [2, 0], [4, 0], [-1, 1], [-1, 3], [3, 1], [0, 2],\n      [2, 2], [1, 3], [3, 3], [0, 4], [-1, 5], [1, 5]\n    ].map(([fx, fy]) => ({ x: Ox + (fx * X), y: Oy + (fy * Y) }))\n\n    return (\n      <>\n        {\n          points.map((pointOrigin, i) => {\n            return (\n              <Hex scale={scale} origin={pointOrigin} key={i} />\n            )\n          })\n        }\n        <Hex\n          scale={scale}\n          origin={{ x: Ox + X, y: Oy + Y }}\n          fill={menuOpen ? '#560bd0' : '#0000'}\n          stroke=\"none\"\n          onClick={this.toggleMenu}\n          polygonComp={MenuHex}\n          polygonStyle={{ zIndex: 5000 }}\n        >\n          {\n            ({ centerPoint }) => {\n              const size = (vw > 500) ? 34 : 20\n              const x = centerPoint.x - size / 2\n              const y = centerPoint.y - size / 2\n              if (menuOpen === true) {\n                return <CloseMenuIcon size={`${size}px`} x={x} y={y} />\n              }\n              return <OpenMenuIcon className=\"menu-icon-open\" size={`${size}px`} x={x} y={y} />\n            }\n          }\n        </Hex>\n      </>\n    )\n  }\n\n  renderFullHoneycomb = () => {\n    const { vh, vw } = this.state\n    const { l, b, h, origin } = Hex.defaultProps\n    const scale = this.getHexScale()\n    const B = scale * b\n    const L = scale * l\n    const H = scale * h\n    const Ox = origin.x\n    const Oy = origin.y\n    const X = B + H\n    const Y = L\n\n    const hexArea = (L * (2 * B + H)) +  L * H\n    const totalScreenArea = (vw * vh)\n    // console.log('vh: ', vh, 'vw :', vw)\n    // console.log('hexArea, totalScreenArea :', hexArea, totalScreenArea)\n    const totalPoints = Math.ceil(totalScreenArea / hexArea)\n\n    let points = []\n    let initialSameColTimes = 2\n    for (let dRowNo = 3;; dRowNo++) {\n      const pointsRow = []\n      const startY = (dRowNo % 2 === 0) ? 0 : -1\n      if (startY === -1) {\n        initialSameColTimes += 1\n      }\n      const maxY = dRowNo * 2 + 1\n      let sameColTimes = initialSameColTimes\n      let i = dRowNo\n\n      for (let j = startY; j < maxY + 1; ) {\n        if ((j * L) > vh) {\n          break\n        }\n        const point = { y: j, x: i, row: dRowNo }\n        if (\n          (j * L) > ((vh / 2) - 250) &&\n          (j * L) < ((vh / 2) + 150) &&\n          (i * (B + H)) > ((vw / 2) - 250) &&\n          (i * (B + H)) < ((vw / 2) + 120)\n        ) {\n          point.stroke = 'none'\n          point.fill = '#eee'\n        }\n\n        if ((i * (B + H)) < vw) {\n          pointsRow.push(point)\n        }\n        sameColTimes -= 1\n        if (sameColTimes > 0) {\n          j += 2\n        } else {\n          i -= 1\n          j += 1\n        }\n      }\n      if (pointsRow.length === 0) break\n      points.push(pointsRow)\n      // if (_.flatten(points).length >= totalPoints) break\n    }\n\n    let rowNo = 1\n    const colorScale = chroma.scale(['#ffd700', '#560bd0'])\n    const pointRows = _.cloneDeep(points)\n    points = []\n    for (const pointRow of pointRows) { // eslint-disable-line\n      const fill = colorScale(rowNo / pointRows.length).hex()\n      // console.log(rowNo, rowNo / pointRows.length)\n      rowNo++\n      for (const point of pointRow) { // eslint-disable-line\n        if (point.stroke !== 'none') {\n          point.fill = fill\n        }\n        points.push(point)\n      }\n    }\n\n    // console.log('points drawn :', points.length, 'target points :', totalPoints)\n\n    const excludePoints = _.concat(\n      // Array.from({ length: (vw > 500) ? 40 : 20 }).map(() => points[_.random(points.length)]),\n      { y: -1, x: 3 }, { x: 4, y: 0 }, { x: 5, y: -1 },\n      { x: 3, y: 1 }, { x: 3, y: 3 }, { x: 1, y: 5 }\n    )\n    points = _.filter(points, (point, i) => {\n      if (point.stroke !== 'none' && _.some(excludePoints, point)) {\n        return false\n      }\n      return true\n    })\n\n    return (\n      <>\n        {\n          points.map((point, i) => {\n            const props = {\n              stroke: point.stroke,\n              fill: point.fill\n            }\n            return (\n              <Hex\n                scale={scale}\n                origin={{ x: Ox + (point.x * X), y: Oy + (point.y * Y) }}\n                row={point.row}\n                key={i}\n                polygonStyle={{ zIndex: 2000 }}\n                {...props}\n              />\n            )\n          })\n        }\n      </>\n    )\n  }\n\n  render() {\n    const { vw, vh, menuOpen } = this.state\n    let containerSize = {\n      w: (520 < vw) ? 520 : vw / 2,\n      h: (300 < vh) ? 300 : vh\n    }\n    if (menuOpen) {\n      containerSize = { w: vw, h: vh }\n    }\n    return (\n      <Container style={{\n        height: `${containerSize.h}px`,\n        width: `${containerSize.w}px`\n      }}>\n        <Menu show={menuOpen}>\n          <MenuItem>\n            HOME\n          </MenuItem>\n          <MenuItem>\n            BLOG\n          </MenuItem>\n          <MenuItem>\n            ABOUT\n          </MenuItem>\n          <MenuItem>\n            PROJECTS\n          </MenuItem>\n        </Menu>\n        <Svg viewBox={`0 0 ${containerSize.w} ${containerSize.h}`}>\n          {this.renderPartialHoneycomb()}\n          {\n            (menuOpen === true) && (\n              this.renderFullHoneycomb()\n            )\n          }\n        </Svg>\n      </Container>\n    )\n  }\n}\n\nexport default HoneycombMenu\n","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { withRouter, Link } from 'react-router-dom'\nimport HoneycombMenu from './HoneycombMenu'\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  width: 100vw;\n  border-top: 6px solid #444;\n  user-select: none;\n`\nconst Content = styled.div`\n  width: 100%;\n  max-width: 1024px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`\nconst Brand = styled.div`\n  font-family: geomanistregular;\n  font-weight: bold;\n  font-size: 32px;\n  letter-spacing: 2px;\n  text-align: right;\n  cursor: pointer;\n`\nconst Tagline = styled.div`\n  font-size: 16px;\n  font-weight: normal;\n`\nconst Dot = styled.span`\n  color: red;\n`\n\nclass Topbar extends React.Component {\n  onBrandClick = () => {\n    const { history } = this.props\n    history.push('/')\n  }\n  render() {\n    const isLocal = _.get(document, 'location.hostname') === 'localhost'\n    return (\n      <Container>\n        <HoneycombMenu />\n        <Content>\n          <Brand onClick={this.onBrandClick}>\n            dpk<Dot>.</Dot>sh\n            <Tagline>\n              Learn, Develop,\n              {\n                isLocal ? (\n                  <Link to=\"/admin\">Teach</Link>\n                ) : ` Teach`\n              }\n            </Tagline>\n          </Brand>\n        </Content>\n      </Container>\n    )\n  }\n}\n\nexport default withRouter(Topbar)\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 40px;\n  font-size: 32px;\n  margin-top: 40px;\n  @media (max-width: 1200px) {\n    margin-top: 72px;\n  }\n`\nconst Wrapper = styled.div`\n  max-width: 800px;\n  width: 100%;\n  margin: auto;\n`\nconst H = styled.b`\n  color: ${({ color = '#560bd0' }) => color};\n`\n\nconst About = () => (\n  <Container>\n    <Wrapper>\n      Hi! <span role=\"img\" aria-label=\"wave\"></span><br /> My name is <H>Deepak Sharma</H>. I'm a <H color=\"#ffb200\">Javascript</H> <H>developer</H> with over <H>3 years</H> of experience.\n      I've worked in <H>Healthcare</H> and <H>Fintech</H> sectors<br />\n      Ping to know more about me!\n    </Wrapper>\n  </Container>\n)\n\nexport default About\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  margin: 40px 0;\n`\n\nconst PostListItem = ({ children }) => (\n  <Container>\n    {children}\n  </Container>\n)\nPostListItem.Title = styled.div`\n  font-size: 32px;\n  font-weight: bold;\n  color: #333;\n  cursor: pointer;\n  &:hover {\n    color: #560bd0;\n  }\n  &:active {\n    color: black;\n  }\n`\nPostListItem.Subtitle = styled.div`\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  color: #999;\n  margin: 8px 0;\n`\nPostListItem.Summary = styled.div`\n  font-size: 22px;\n`\nPostListItem.Link = styled.span`\n  color: #560bd0;\n  cursor: pointer;\n`\n\nexport default PostListItem\n","import _ from 'lodash'\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { Clock } from 'styled-icons/evil/Clock'\nimport Post from '../common/PostListItem'\nimport 'typeface-roboto'\n\nconst Container = styled.div`\n  font-family: Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  width: 100%;\n  max-width: 880px;\n  padding: 0 40px;\n  margin-top: 40px;\n`\nconst Heading = styled.div`\n  text-shadow: 0px 0px 0px #555;\n  font-size: 40px;\n  letter-spacing: 1px;\n  color: black;\n`\n\nclass BlogPosts extends React.Component {\n  state = {\n    posts: {\n      items: [],\n      page: 0,\n      size: 0,\n      total: 0\n    }\n  }\n\n  componentDidMount() {\n    const posts = require('../../data/pages/1.json')\n    this.setState({ posts })\n  }\n\n  openPost = (id) => () => {\n    const { history } = this.props\n    history.push(`/${id}`)\n  }\n\n  render() {\n    const { posts } = this.state\n    return (\n      <Container>\n        <Heading>Blog</Heading>\n        <hr />\n        {\n          posts.items.map(post => (\n            <Post key={post.id}>\n              <Post.Title onClick={this.openPost(post.id)}>{post.title}</Post.Title>\n              <Post.Subtitle><Clock size=\"20px\" />{_.get(post, 'ttr.text', '')}</Post.Subtitle>\n              <Post.Summary>\n                {post.summary}\n                <Post.Link onClick={this.openPost(post.id)}>&nbsp; Read</Post.Link>\n              </Post.Summary>\n            </Post>\n          ))\n        }\n      </Container>\n    )\n  }\n}\n\nexport default withRouter(BlogPosts)\n","import React from 'react'\nimport styled from 'styled-components'\nimport Topbar from '../Topbar'\nimport About from './About'\nimport BlogPosts from './BlogPosts'\n\nconst Container = styled.div`\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  user-select: none;\n`\n\nclass Home extends React.Component {\n  render() {\n    return (\n      <Container>\n        <Topbar />\n        <About />\n        <BlogPosts />\n      </Container>\n    )\n  }\n}\n\nexport default Home\n","import React from 'react'\n\nconst highlighted = IconComponent => ({ active, ...restProps }) => {\n  if (active) {\n    return <IconComponent style={{ fill: '#ffa000' }} {...restProps} />\n  }\n  return <IconComponent {...restProps} />\n}\n\nexport default highlighted\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst BoldIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(BoldIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst ItalicIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(ItalicIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst UnderlineIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(UnderlineIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n  transform: rotate(-45deg);\n`;\n\nconst LinkIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(LinkIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst BulletsIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\" />\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(BulletsIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst NumberingIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\" />\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(NumberingIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst CodeIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n      <path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(CodeIcon);\n","import React from 'react'\nimport styled from 'styled-components'\nimport highlighted from './highlighted'\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`\n\nconst BlockquoteIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\" />\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    </SVG>\n  )\n}\n\nexport default highlighted(BlockquoteIcon)\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst ImageIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(ImageIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: #777;\n`;\n\nconst VideoIcon = props => {\n  return (\n    <SVG\n      height={24}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path d=\"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-6l-7 4V7z\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(VideoIcon);\n","import React from 'react';\nimport styled from 'styled-components';\nimport highlighted from './highlighted';\n\nconst SVG = styled.svg`\n  margin: 0 4px;\n  cursor: pointer;\n  fill: none;\n  stroke: #787878;\n  stroke-width: 5;\n`;\n\nconst QnALinkIcon = props => {\n  return (\n    <SVG\n      height={21}\n      {...props}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 61.3 66.5\"\n    >\n      <path d=\"M41.5,36.3l16.7-17.4c0.2-0.2,0.3-0.4,0.3-0.7l0.3-9c0-0.5-0.3-0.9-0.8-1L25.1,2.5c-0.2,0-0.5,0-0.7,0.1L3,14.8\n      \tc-0.3,0.2-0.5,0.6-0.5,0.9l0.7,9.8c0,0.4,0.3,0.8,0.7,0.9l36.5,10.2C40.8,36.7,41.2,36.6,41.5,36.3z\" />\n      <path d=\"M55,41c1.4,0,2.4,0.9,2.5,1.9l-0.1,1.7c0,0.2-0.1,0.4-0.2,0.6l-15,18.4c-0.3,0.3-0.7,0.4-1.1,0.3L6.3,52.1\n      \tc-0.4-0.1-0.6-0.5-0.7-0.9l-0.4-5.1c-0.1-0.7,1.3-1,2.6-1\" />\n      <path d=\"M6,31.7c-1.4,0.1-2.4,1.3-2.4,2l0.4,4.8c0,0.4,0.3,0.8,0.7,0.9l36.2,11.2c0.4,0.1,0.8,0,1-0.3l15.4-17.6\n      \tc0.2-0.2,0.2-0.4,0.2-0.6l0-2.9c0-0.9-0.6-1.9-2.4-1.9\" />\n    </SVG>\n  );\n};\n\nexport default highlighted(QnALinkIcon);\n","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport highlighted from './highlighted'\n\nconst Container = styled.div`\n  padding: 0 6px;\n  cursor: pointer;\n  color: ${({ style }) => _.get(style, 'fill')};\n  font-size: 19px;\n  display: flex;\n  align-items: center;\n`\n\nconst FontSizeCtrl = ({ children, ...restProps }) => {\n  return (\n    <Container {...restProps}>\n      {children}\n    </Container>\n  )\n}\n\nexport default highlighted(FontSizeCtrl)\n","import React from 'react'\nimport styled from 'styled-components'\nimport highlighted from './highlighted'\nimport { CodeCurly } from 'styled-icons/boxicons-regular/CodeCurly'\n\nconst Icon = styled(CodeCurly)`\n  cursor: pointer;\n  fill: #777;\n  margin-left: 4px;\n`\n\nconst InlineCode = (props) => {\n  return (\n    <Icon {...props} size=\"22\" />\n  )\n}\n\nexport default highlighted(InlineCode)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { RichUtils } from 'draft-js'\nimport { Bold, Italic, Underline, InlineCode } from '../icons/editor'\n\nconst ControlsContainer = styled.div`\n  display: flex;\n`\n\nconst InlineStyleControls = props => {\n  const { getEditorState, setEditorState } = props\n  const editorState = getEditorState()\n  const onClick = inlineStyle => e => {\n    e.preventDefault()\n    setEditorState(RichUtils.toggleInlineStyle(editorState, inlineStyle))\n  }\n\n  const currentStyle = editorState.getCurrentInlineStyle()\n\n  return (\n    <ControlsContainer>\n      <Bold onMouseDown={onClick('BOLD')} active={currentStyle.has('BOLD')} />\n      <Italic\n        onMouseDown={onClick('ITALIC')}\n        active={currentStyle.has('ITALIC')}\n      />\n      <Underline\n        onMouseDown={onClick('UNDERLINE')}\n        active={currentStyle.has('UNDERLINE')}\n      />\n      <InlineCode\n        onMouseDown={onClick('CODE')}\n        active={currentStyle.has('CODE')}\n        size=\"24\"\n      />\n    </ControlsContainer>\n  )\n}\n\nexport default InlineStyleControls\n","import React from 'react'\nimport styled from 'styled-components'\nimport { RichUtils } from 'draft-js'\nimport { Bullets, Numbering, Code, Blockquote, FontSizeCtrl } from '../icons/editor'\n\nconst ControlsContainer = styled.div`\n  display: flex;\n`\nconst Separator = styled.div`\n  border-right: 1px solid #e0e0e0;\n  height: 24px;\n  margin: 0 8px;\n`\n\nconst BlockTypeControls = props => {\n  const { getEditorState, setEditorState, editorRef } = props\n  const editorState = getEditorState()\n  const selection = editorState.getSelection()\n  const currentBlockType = editorState\n    .getCurrentContent()\n    .getBlockForKey(selection.getStartKey())\n    .getType()\n\n  const onClick = blockType => e => {\n    e.preventDefault()\n    setEditorState(RichUtils.toggleBlockType(editorState, blockType))\n    editorRef && editorRef.focus()\n  }\n  return (\n    <ControlsContainer>\n      <FontSizeCtrl\n        onMouseDown={onClick('header-one')}\n        active={currentBlockType === 'header-one'}\n      >\n        H1\n      </FontSizeCtrl>\n      <FontSizeCtrl\n        onMouseDown={onClick('header-two')}\n        active={currentBlockType === 'header-two'}\n      >\n        H2\n      </FontSizeCtrl>\n      <FontSizeCtrl\n        onMouseDown={onClick('header-three')}\n        active={currentBlockType === 'header-three'}\n      >\n        H3\n      </FontSizeCtrl>\n      <Separator />\n      <Numbering\n        onMouseDown={onClick('ordered-list-item')}\n        active={currentBlockType === 'ordered-list-item'}\n      />\n      <Bullets\n        onMouseDown={onClick('unordered-list-item')}\n        active={currentBlockType === 'unordered-list-item'}\n      />\n      <Blockquote\n        onMouseDown={onClick('blockquote')}\n        active={currentBlockType === 'blockquote'}\n      />\n      <Code\n        onMouseDown={onClick('code-block')}\n        active={currentBlockType === 'code-block'}\n      />\n    </ControlsContainer>\n  )\n}\n\nexport default BlockTypeControls\n","export const Block = {\n  UNSTYLED: 'unstyled',\n  PARAGRAPH: 'unstyled',\n  OL: 'ordered-list-item',\n  UL: 'unordered-list-item',\n  H1: 'header-one',\n  H2: 'header-two',\n  H3: 'header-three',\n  H4: 'header-four',\n  H5: 'header-five',\n  H6: 'header-six',\n  CODE: 'code-block',\n  BLOCKQUOTE: 'blockquote',\n  PULLQUOTE: 'pullquote',\n  ATOMIC: 'atomic',\n  BLOCKQUOTE_CAPTION: 'block-quote-caption',\n  CAPTION: 'caption',\n  QNA: 'atomic:qna',\n  VIDEO: 'atomic:video',\n  IMAGE: 'atomic:image',\n  BREAK: 'atomic:break'\n}\n\nexport const Inline = {\n  BOLD: 'BOLD',\n  CODE: 'CODE',\n  ITALIC: 'ITALIC',\n  STRIKETHROUGH: 'STRIKETHROUGH',\n  UNDERLINE: 'UNDERLINE',\n  HIGHLIGHT: 'HIGHLIGHT'\n}\n\nexport const Entity = {\n  LINK: 'LINK'\n}\n\nexport const HYPERLINK = 'hyperlink'\nexport const HANDLED = 'handled'\nexport const NOT_HANDLED = 'not_handled'\n\nexport const KEY_COMMANDS = {\n  addNewBlock: () => 'add-new-block',\n  changeType: (type = '') => `changetype:${type}`,\n  showLinkInput: () => 'showlinkinput',\n  unlink: () => 'unlink',\n  toggleInline: (type = '') => `toggleinline:${type}`,\n  deleteBlock: () => 'delete-block'\n}\n\nexport const IMAGE_CTRL = 'IMAGE_EMBED'\nexport const VIDEO_CTRL = 'VIDEO_EMBED'\nexport const LINK_CTRL = 'LINK_EMBED'\nexport const QNA_CTRL = 'QNA_EMBED'\nexport const CODE_EMBED_CTRL = 'CODE_EMBED'\n\nexport const DEFAULT_CODEBLOCK_LANG = null\n\nexport default {\n  Block,\n  Inline,\n  Entity\n}\n","import styled from 'styled-components'\n\nexport const TextInput = styled.input`\n  font-size: 12px;\n  color: #111;\n  letter-spacing: 1px;\n  padding: 0;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid #e0e0e0;\n  width: 100%;\n  font-family: roboto;\n  font-weight: 300;\n  &::placeholder {\n    font-weight: 100;\n    color: #777;\n  }\n  &:focus {\n    border-bottom: 2px solid #ffa000;\n  }\n`\nexport const Button = styled.button`\n  padding: 0 8px;\n  font-size: 12px;\n`\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { TextInput, Button } from './styled'\nimport isUrl from 'is-url-superb'\n\nconst UrlInput = styled(TextInput)`\n  ${({ valid }) =>\n    !valid &&\n    css `\n      border-color: red;\n    `};\n`\n\nconst addDefaultUrlProtocol = url => {\n  if (\n    !url.startsWith('http://') &&\n    !url.startsWith('https://') &&\n    !url.startsWith('//')\n  ) {\n    return `http://${url}`\n  }\n  return url\n}\n\nclass LinkCtrl extends React.Component {\n  // TODO: focus input on click\n\n  // componentDidMount() {\n  //   document.addEventListener('click', e => {\n  //     if (this.container && !this.container.contains(e.target)) {\n  //       this.setState({ clickedOutside: true });\n  //     }\n  //   });\n  // }\n\n  // shouldComponentUpdate(nextProps) {\n  //   const { activeCtrl, ctrlKey } = this.props.data;\n  //   const { activeCtrl: nextActiveCtrl, ctrlKey: nextCtrlKey } = nextProps.data;\n  //   console.log('current: ', activeCtrl, ctrlKey);\n  //   console.log('next: ', nextActiveCtrl, nextCtrlKey);\n  //   return true;\n  //   // if (activeCtrl===ctrlKey)\n  // }\n\n  // componentDidUpdate(prevProps) {\n  // const { activeCtrl, ctrlKey } = this.props.data;\n  // if (activeCtrl===ctrlKey) {\n  //   this.input && this.input.focus();\n  // }\n  // }\n\n  state = {\n    urlIsValid: true\n  };\n\n  onSubmit = e => {\n    e.preventDefault()\n    const { getEmbedUrl, submitUrl, urlIdentifier = 'src', url } = this.props\n\n    let webUrl = addDefaultUrlProtocol(url)\n\n    let validUrl = true\n\n    if (!isUrl(webUrl)) validUrl = false\n    else if (getEmbedUrl) {\n      const embedUrlMatch = getEmbedUrl(webUrl)\n\n      if (!embedUrlMatch || !embedUrlMatch.matched) validUrl = false\n      else webUrl = embedUrlMatch.data[urlIdentifier]\n    }\n\n    if (!validUrl) this.setState({ urlIsValid: false })\n    else {\n      submitUrl(webUrl)\n      this.setState({ urlIsValid: true })\n    }\n  };\n\n  renderUrlInput = placeholder => {\n    const { urlIsValid } = this.state\n    const { url, updateUrl } = this.props\n    return [\n      <UrlInput\n        ref={el => {\n          this.input = el\n        }}\n        placeholder={placeholder}\n        key=\"text-input\"\n        value={url}\n        onChange={updateUrl}\n        required\n        valid={urlIsValid}\n      />,\n      <Button onClick={this.onSubmit} key=\"submit-button\">\n        Submit\n      </Button>\n    ]\n  };\n\n  render() {\n    const {\n      Icon,\n      ctrlKey,\n      activeCtrl,\n      onIconClick,\n      inputPlaceholder\n    } = this.props\n\n    const urlInput = this.renderUrlInput(inputPlaceholder)\n    const icon = <Icon key={ctrlKey} onClick={onIconClick} />\n\n    let content\n    // link ctrl is active, display url input\n    if (activeCtrl === ctrlKey) content = [icon, ...urlInput]\n    else if (activeCtrl)\n      // some other ctrl is active, hide link ctrl\n      content = null\n    else\n      // no ctrls active, just display the icon\n      content = icon\n\n    return content\n  }\n}\n\nexport default LinkCtrl\n","import React from 'react'\nimport { EditorState, RichUtils } from 'draft-js'\nimport { Link as LinkIcon } from '../../icons/editor'\nimport { LINK_CTRL } from '../../constants'\nimport Ctrl from './Ctrl'\n\n// TODO: when selection is collapsed use the link url as value for the anchor entity\nclass LinkCtrl extends React.Component {\n  state = {\n    url: ''\n  };\n\n  onChange = e => {\n    e.preventDefault()\n    this.setState({ url: e.target.value })\n  };\n\n  componentWillReceiveProps(nextProps) {\n    const { getEditorState, activeCtrl } = nextProps\n    if (activeCtrl === LINK_CTRL) {\n      const editorState = getEditorState()\n      const selection = editorState.getSelection()\n      if (!selection.isCollapsed()) {\n        const contentState = editorState.getCurrentContent()\n        const startKey = editorState.getSelection().getStartKey()\n        const startOffset = editorState.getSelection().getStartOffset()\n        const blockWithLinkAtBeginning = contentState.getBlockForKey(startKey)\n        const linkKey = blockWithLinkAtBeginning.getEntityAt(startOffset)\n        let url = ''\n        if (linkKey) {\n          const linkInstance = contentState.getEntity(linkKey)\n          url = linkInstance.getData().href\n        }\n        this.setState({ url })\n      }\n    }\n  }\n\n  onSubmit = url => {\n    const editorState = this.props.getEditorState()\n    if (url) {\n      // TODO: validate url\n      const contentState = editorState.getCurrentContent()\n      const contentStateWithEntity = contentState.createEntity(\n        'LINK',\n        'SEGMENTED',\n        { href: url }\n      )\n      const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n      let newEditorState = EditorState.set(editorState, {\n        currentContent: contentStateWithEntity\n      })\n      this.props.setEditorState(\n        RichUtils.toggleLink(\n          newEditorState,\n          newEditorState.getSelection(),\n          entityKey\n        ),\n        this.props.onSubmit\n      )\n    }\n  };\n\n  render() {\n    const data = {\n      Icon: LinkIcon,\n      ctrlKey: LINK_CTRL,\n      url: this.state.url,\n      updateUrl: this.onChange,\n      submitUrl: this.onSubmit,\n      onIconClick: this.props.toggleCtrl,\n      activeCtrl: this.props.activeCtrl,\n      inputPlaceholder: 'Paste your url here'\n    }\n    return <Ctrl {...data} />\n  }\n}\n\nexport default LinkCtrl\n","import Immutable from 'immutable'\n\n// Why not use https://github.com/SamyPesse/draft-js-multidecorators?\n// Because draft-js dependency has not been updated due to which composite\n// decorator strategy has older signature which does not accepts contentState,\n// which breaks newer versions of decorator(like video)\n// ref. https://draftjs.org/docs/v0-10-api-migration.html#decorator-strategy-arguments-change\n// TODO: update dependency in above said repo, or take own fork and maintain\n\nconst KEY_SEPARATOR = '-'\n\nclass MultiDecorator {\n  constructor(decorators) {\n    this.decorators = Immutable.List(decorators)\n  }\n\n  /**\n   * Return list of decoration IDs per character\n   *\n   * @param {ContentBlock} block\n   * @return {List<String>}\n   */\n  getDecorations(block, contentState) {\n    const decorations = new Array(block.getText().length).fill(null)\n\n    this.decorators.forEach((decorator, i) => {\n      const subDecorations = decorator.getDecorations(block, contentState)\n\n      subDecorations.forEach((key, offset) => {\n        if (!key) {\n          return\n        }\n\n        decorations[offset] = i + KEY_SEPARATOR + key\n      })\n    })\n\n    return Immutable.List(decorations)\n  }\n\n  /**\n   * Return component to render a decoration\n   *\n   * @param {String} key\n   * @return {Function}\n   */\n  getComponentForKey(key) {\n    const decorator = this.getDecoratorForKey(key)\n    return decorator.getComponentForKey(MultiDecorator.getInnerKey(key))\n  }\n\n  /**\n   * Return props to render a decoration\n   *\n   * @param {String} key\n   * @return {Object}\n   */\n  getPropsForKey(key) {\n    const decorator = this.getDecoratorForKey(key)\n    return decorator.getPropsForKey(MultiDecorator.getInnerKey(key))\n  }\n\n  /**\n   * Return a decorator for a specific key\n   *\n   * @param {String} key\n   * @return {Decorator}\n   */\n  getDecoratorForKey(key) {\n    const parts = key.split(KEY_SEPARATOR)\n    const index = Number(parts[0])\n\n    return this.decorators.get(index)\n  }\n\n  /**\n   * Return inner key for a decorator\n   *\n   * @param {String} key\n   * @return {String}\n   */\n  static getInnerKey(key) {\n    const parts = key.split(KEY_SEPARATOR)\n    return parts.slice(1).join(KEY_SEPARATOR)\n  }\n}\n\nexport default MultiDecorator\n","import React from 'react'\nimport styled from 'styled-components'\n\n// Ref. https://www.h3xed.com/web-development/how-to-make-a-responsive-100-width-youtube-iframe-embed\nconst Wrapper = styled.div`\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n`\nconst IFrame = styled.iframe`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`\n\n// TODO: Process youtube/vimeo video urls\nconst videoStrategy = (contentBlock, callback, contentState) => {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity()\n    return (\n      entityKey !== null &&\n      contentState.getEntity(entityKey).getType() === 'video'\n    )\n  }, callback)\n}\n\n// TODO: Add loader\nconst Video = props => {\n  const { contentState, entityKey } = props\n  const { src } = contentState.getEntity(entityKey).getData()\n  return (\n    <Wrapper>\n      <IFrame title={src} src={src} frameBorder=\"0\" allowFullScreen />\n    </Wrapper>\n  )\n}\n\nexport default {\n  strategy: videoStrategy,\n  component: Video\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Anchor = styled.a`\n  position: relative;\n  color: #07c;\n  text-decoration: none !important;\n  padding-bottom: 2px;\n  cursor: pointer;\n  &:before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 1px;\n    bottom: 0;\n    left: 0;\n    background-color: rgba(0, 119, 204, 0.3);\n    visibility: hidden;\n    -webkit-transform: scaleX(0);\n    transform: scaleX(0);\n    -webkit-transition: all 0.3s ease-in-out 0s;\n    transition: all 0.3s ease-in-out 0s;\n  }\n  &:hover:before {\n    visibility: visible;\n    -webkit-transform: scaleX(1);\n    transform: scaleX(1);\n  }\n`\n\nconst linkStrategy = (contentBlock, callback, contentState) => {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity()\n    return (\n      entityKey !== null &&\n      contentState.getEntity(entityKey).getType() === 'LINK'\n    )\n  }, callback)\n}\n\nconst processUrl = href => {\n  // remove any starting fwd slashes\n  href = href.replace(/^\\/*(.*)/, (match, url) => url)\n  if (!href.startsWith('http')) {\n    href = 'http://' + href\n  }\n  return href\n}\n\nconst Link = props => {\n  const { contentState, entityKey, children } = props\n  const { href } = contentState.getEntity(entityKey).getData()\n  return (\n    <Anchor href={processUrl(href)} target=\"_blank\" className=\"anchor\">\n      {children}\n    </Anchor>\n  )\n}\n\nexport default {\n  strategy: linkStrategy,\n  component: Link\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n`\nconst Img = styled.img`\n  max-width: 100%;\n  max-height: 480px;\n`\n\nconst imageStrategy = (contentBlock, callback, contentState) => {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity()\n    return (\n      entityKey !== null &&\n      contentState.getEntity(entityKey).getType() === 'IMAGE'\n    )\n  }, callback)\n}\n\nconst Image = props => {\n  const { contentState, entityKey } = props\n  const { src, title, alt } = contentState.getEntity(entityKey).getData()\n  return (\n    <Wrapper>\n      <Img src={src} alt={alt} title={title} />\n    </Wrapper>\n  )\n}\n\nexport default {\n  strategy: imageStrategy,\n  component: Image\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Code = styled.span`\n  font-family: monospace;\n  word-wrap: break-word;\n  color: rgb(218, 64, 0);\n  background: #eee;\n  padding: 0 4px;\n  border-radius: 6px;\n`\n\nconst codeStrategy = (contentBlock, callback, contentState) => {\n  contentBlock.findStyleRanges(character => {\n    return character.hasStyle('CODE')\n  }, callback)\n}\n\nconst InlineCode = props => {\n  return <Code>{props.children}</Code>\n}\n\nexport default {\n  strategy: codeStrategy,\n  component: InlineCode\n}\n","import videoDecorator from './video'\nimport linkDecorator from './link'\nimport imageDecorator from './image'\nimport inlineCodeDecorator from './inlineCode'\n\nexport default [\n  videoDecorator,\n  linkDecorator,\n  imageDecorator,\n  inlineCodeDecorator\n]\n","import codeDecorator from './code'\n\nexport default [codeDecorator]\n","import React from 'react'\nimport PrismDecorator from 'draft-js-prism'\nimport Prism from 'prismjs'\nimport 'prismjs/components/prism-jsx.min'\nimport 'prismjs/components/prism-python.min'\nimport 'prismjs/components/prism-java.min'\nimport 'prismjs/components/prism-go.min'\nimport 'prismjs/components/prism-php.min'\nimport 'prismjs/components/prism-scala.min'\nimport 'prismjs/components/prism-json.min'\nimport { DEFAULT_CODEBLOCK_LANG } from '../../../constants'\nimport './prism.css'\nimport './custom.css'\n\nconst codeDecorator = new PrismDecorator({\n  defaultSyntax: DEFAULT_CODEBLOCK_LANG,\n  prism: Prism,\n  render: props => {\n    const className = `prism-token token ${props.type}`\n    return <span className={className}>{props.children}</span>\n  }\n})\n\nexport default codeDecorator\n","import { CompositeDecorator } from 'draft-js'\nimport MultiDecorator from './MultiDecorator'\nimport composableDecorators from './composable'\nimport customDecorators from './custom'\n\n// TODO: stackexchange community url decorator\n// TODO: jsfiddle, github gist url decorators\nconst compositeDecorator = new CompositeDecorator([...composableDecorators])\n\nexport default new MultiDecorator([compositeDecorator, ...customDecorators])\n","import { Map, List } from 'immutable'\nimport {\n  EditorState,\n  ContentState,\n  ContentBlock,\n  convertFromRaw,\n  genKey\n} from 'draft-js'\nimport { Block, Entity } from './constants'\nimport defaultDecorators from './decorators'\n\nexport const createEditorState = (\n  content = null,\n  decorators = defaultDecorators\n) => {\n  if (!content) {\n    return EditorState.createEmpty(decorators)\n  }\n  let contentState = null\n  if (typeof content === 'string') {\n    contentState = ContentState.createFromText(content)\n  } else {\n    if (!content.entityMap) {\n      content.entityMap = {}\n    }\n    contentState = convertFromRaw(content)\n  }\n  return EditorState.createWithContent(contentState, decorators)\n}\n\n/*\nReturns default block-level metadata for various block type. Empty object otherwise.\n*/\nexport const getDefaultBlockData = (blockType, initialData = {}) => {\n  switch (blockType) {\n  case Block.TODO:\n    return { checked: false }\n  default:\n    return initialData\n  }\n}\n\n/*\nGet currentBlock in the editorState.\n*/\nexport const getCurrentBlock = editorState => {\n  const selectionState = editorState.getSelection()\n  const contentState = editorState.getCurrentContent()\n  const block = contentState.getBlockForKey(selectionState.getStartKey())\n  return block\n}\n\n/*\nAdds a new block (currently replaces an empty block) at the current cursor position\nof the given `newType`.\n*/\nexport const addNewBlock = (\n  editorState,\n  newType = Block.UNSTYLED,\n  initialData = {}\n) => {\n  const selectionState = editorState.getSelection()\n  if (!selectionState.isCollapsed()) {\n    return editorState\n  }\n  const contentState = editorState.getCurrentContent()\n  const key = selectionState.getStartKey()\n  const blockMap = contentState.getBlockMap()\n  const currentBlock = getCurrentBlock(editorState)\n  if (!currentBlock) {\n    return editorState\n  }\n  if (currentBlock.getLength() === 0) {\n    if (currentBlock.getType() === newType) {\n      return editorState\n    }\n    const newBlock = currentBlock.merge({\n      type: newType,\n      data: getDefaultBlockData(newType, initialData)\n    })\n    const newContentState = contentState.merge({\n      blockMap: blockMap.set(key, newBlock),\n      selectionAfter: selectionState\n    })\n    return EditorState.push(editorState, newContentState, 'change-block-type')\n  }\n  return editorState\n}\n\n/*\nChanges the block type of the current block.\n*/\nexport const resetBlockWithType = (\n  editorState,\n  newType = Block.UNSTYLED,\n  overrides = {}\n) => {\n  const contentState = editorState.getCurrentContent()\n  const selectionState = editorState.getSelection()\n  const key = selectionState.getStartKey()\n  const blockMap = contentState.getBlockMap()\n  const block = blockMap.get(key)\n  const newBlock = block.mergeDeep(overrides, {\n    type: newType,\n    data: getDefaultBlockData(newType)\n  })\n  const newContentState = contentState.merge({\n    blockMap: blockMap.set(key, newBlock),\n    selectionAfter: selectionState.merge({\n      anchorOffset: 0,\n      focusOffset: 0\n    })\n  })\n  return EditorState.push(editorState, newContentState, 'change-block-type')\n}\n\n/*\nUpdate block-level metadata of the given `block` to the `newData`/\n*/\nexport const updateDataOfBlock = (editorState, block, newData) => {\n  const contentState = editorState.getCurrentContent()\n  const newBlock = block.merge({\n    data: newData\n  })\n  const newContentState = contentState.merge({\n    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock)\n  })\n  return EditorState.push(editorState, newContentState, 'change-block-data')\n}\n\n// const BEFORE = -1;\n// const AFTER = 1;\n\n/*\nUsed from [react-rte](https://github.com/sstur/react-rte/blob/master/src/lib/insertBlockAfter.js)\nby [sstur](https://github.com/sstur)\n*/\nexport const addNewBlockAt = (\n  editorState,\n  pivotBlockKey,\n  newBlockType = Block.UNSTYLED,\n  initialData = {}\n) => {\n  const content = editorState.getCurrentContent()\n  const blockMap = content.getBlockMap()\n  const block = blockMap.get(pivotBlockKey)\n  if (!block) {\n    throw new Error(\n      `The pivot key - ${pivotBlockKey} is not present in blockMap.`\n    )\n  }\n  const blocksBefore = blockMap.toSeq().takeUntil(v => v === block)\n  const blocksAfter = blockMap\n    .toSeq()\n    .skipUntil(v => v === block)\n    .rest()\n  const newBlockKey = genKey()\n\n  const newBlock = new ContentBlock({\n    key: newBlockKey,\n    type: newBlockType,\n    text: '',\n    characterList: List(),\n    depth: 0,\n    data: Map(getDefaultBlockData(newBlockType, initialData))\n  })\n\n  const newBlockMap = blocksBefore\n    .concat([[pivotBlockKey, block], [newBlockKey, newBlock]], blocksAfter)\n    .toOrderedMap()\n\n  const selection = editorState.getSelection()\n\n  const newContent = content.merge({\n    blockMap: newBlockMap,\n    selectionBefore: selection,\n    selectionAfter: selection.merge({\n      anchorKey: newBlockKey,\n      anchorOffset: 0,\n      focusKey: newBlockKey,\n      focusOffset: 0,\n      isBackward: false\n    })\n  })\n  return EditorState.push(editorState, newContent, 'split-block')\n}\n\n/**\n * Check whether the cursor is between entity of type LINK\n */\nexport const isCursorBetweenLink = editorState => {\n  let ret = null\n  const selection = editorState.getSelection()\n  const content = editorState.getCurrentContent()\n  const currentBlock = getCurrentBlock(editorState)\n  if (!currentBlock) {\n    return ret\n  }\n  let entityKey = null\n  let blockKey = null\n  if (currentBlock.getType() !== Block.ATOMIC && selection.isCollapsed()) {\n    if (currentBlock.getLength() > 0) {\n      if (selection.getAnchorOffset() > 0) {\n        entityKey = currentBlock.getEntityAt(selection.getAnchorOffset() - 1)\n        blockKey = currentBlock.getKey()\n        if (entityKey !== null) {\n          const entity = content.getEntity(entityKey)\n          if (entity.getType() === Entity.LINK) {\n            ret = {\n              entityKey,\n              blockKey,\n              url: entity.getData().url\n            }\n          }\n        }\n      }\n    }\n  }\n  return ret\n}\n","import React from 'react'\nimport { ImageIcon } from '../../icons/editor'\nimport { addNewBlock } from '../../model'\nimport { IMAGE_CTRL, Block } from '../../constants'\nimport Ctrl from './Ctrl'\n\nclass ImageCtrl extends React.Component {\n  state = {\n    url: ''\n  };\n\n  onChange = e => {\n    e.preventDefault()\n    this.setState({ url: e.target.value })\n  };\n\n  onSubmit = src => {\n    const editorState = this.props.getEditorState()\n    const newEditorState = addNewBlock(editorState, Block.IMAGE, { src })\n    this.props.setEditorState(newEditorState, this.props.onSubmit)\n  };\n\n  render() {\n    const { url } = this.state\n    const props = {\n      Icon: ImageIcon,\n      ctrlKey: IMAGE_CTRL,\n      url,\n      updateUrl: this.onChange,\n      submitUrl: this.onSubmit,\n      onIconClick: this.props.toggleCtrl,\n      activeCtrl: this.props.activeCtrl,\n      inputPlaceholder: 'Image URL (Imgur, Flickr, etc.)'\n    }\n    return <Ctrl {...props} />\n  }\n}\n\nexport default ImageCtrl\n","import videoUrlParser from 'js-video-url-parser/dist/jsVideoUrlParser.min'\nimport { Block } from '../constants'\n\nexport const checkCodeEmbeds = (text = '') => {\n  const embedRegex = {\n    codesandbox: [\n      /(?:https?:\\/\\/)?codesandbox.io\\/s\\/([^/]+)/,\n      /(?:https?:\\/\\/)?codesandbox.io\\/embed\\/([^/]+)/\n    ],\n    jsfiddle: [/(?:https?:\\/\\/)?jsfiddle.net\\/([^/]+)\\/([^/]+)/],\n    codepen: [\n      /(?:https?:\\/\\/)?codepen.io\\/([^/]+)\\/pen\\/([^/]+)/,\n      /(?:https?:\\/\\/)?codepen.io\\/([^/]+)\\/embed\\/([^/]+)/\n    ]\n  }\n  const embedUrl = {\n    codesandbox: id => `https://codesandbox.io/embed/${id}`,\n    jsfiddle: (userId, id) => `https://jsfiddle.net/${userId}/${id}/embedded`,\n    codepen: (userId, id) =>\n      `https://codepen.io/${userId}/embed/${id}/?theme-id=0&default-tab=html,result&embed-version=2`\n    // githubGist: (handle, id) => `https://gist.github.com/${handle}/${id}`\n  }\n\n  let match, matchedProvider\n  Object.entries(embedRegex).some(([provider, regexes]) => {\n    regexes.some(regex => {\n      match = text.match(regex)\n      matchedProvider = provider\n      return match !== null\n    })\n    return match !== null\n  })\n\n  if (match) {\n    const [, ...matchGroups] = match\n    const src = embedUrl[matchedProvider](...matchGroups)\n    return {\n      matched: true,\n      blockType: Block.VIDEO,\n      data: { src }\n    }\n  }\n  return null\n}\n\nexport const checkVideoEmbeds = text => {\n  const SUPPORTED_PROVIDERS = ['youtube', 'vimeo', 'dailymotion', 'twitch']\n  const SUPPORTED_MEDIA = ['video']\n  const videoInfo = videoUrlParser.parse(text) || {}\n  if (\n    SUPPORTED_MEDIA.indexOf(videoInfo.mediaType) !== -1 &&\n    SUPPORTED_PROVIDERS.indexOf(videoInfo.provider) !== -1\n  ) {\n    const src = videoUrlParser.create({ videoInfo, format: 'embed' })\n    return {\n      matched: true,\n      blockType: Block.VIDEO,\n      data: { src }\n    }\n  }\n  return null\n}\n\nexport const checkQnaEmbeds = (text = '') => {\n  const SUPPORTED_SE_SITES = [\n    'stackoverflow.com',\n    'serverfault.com',\n    'superuser.com',\n    'askubuntu.com',\n    'softwareengineering.stackexchange.com',\n    'security.stackexchange.com',\n    'apple.stackexchange.com',\n    'graphicdesign.stackexchange.com',\n    'ux.stackexchange.com',\n    'unix.stackexchange.com',\n    'cstheory.stackexchange.com',\n    'cs.stackexchange.com',\n    'dba.stackexchange.com',\n    'codereview.stackexchange.com',\n    'math.stackexchange.com',\n    'android.stackexchange.com'\n  ].join('|')\n  const urlRegex = new RegExp(\n    `(?:https?://)?(${SUPPORTED_SE_SITES})/q(?:uestions)?/([^/]+)`\n  )\n  const match = text.match(urlRegex)\n  const [url, site] = match || []\n  if (SUPPORTED_SE_SITES.indexOf(site) !== -1) {\n    return {\n      matched: true,\n      blockType: Block.QNA,\n      data: { url }\n    }\n  }\n  return null\n}\n\nexport default text => {\n  const videoEmbeds = checkVideoEmbeds(text)\n  if (videoEmbeds) return videoEmbeds\n\n  const codeEmbeds = checkCodeEmbeds(text)\n  if (codeEmbeds) return codeEmbeds\n\n  const qnaEmbeds = checkQnaEmbeds(text)\n  if (qnaEmbeds) return qnaEmbeds\n\n  return { matched: false }\n}\n","import React from 'react'\nimport { VideoIcon } from '../../icons/editor'\nimport { addNewBlock } from '../../model'\nimport { VIDEO_CTRL, Block } from '../../constants'\nimport Ctrl from './Ctrl'\nimport { checkVideoEmbeds } from '../../utils/checkEmbeds'\n\nclass VideoCtrl extends React.Component {\n  state = {\n    url: ''\n  };\n\n  onChange = e => {\n    e.preventDefault()\n    this.setState({ url: e.target.value })\n  };\n\n  onSubmit = src => {\n    const editorState = this.props.getEditorState()\n    const newEditorState = addNewBlock(editorState, Block.VIDEO, { src })\n    this.props.setEditorState(newEditorState, this.props.onSubmit)\n  };\n\n  render() {\n    const { url } = this.state\n    const props = {\n      Icon: VideoIcon,\n      ctrlKey: VIDEO_CTRL,\n      urlIdentifier: 'src',\n      getEmbedUrl: checkVideoEmbeds,\n      url,\n      updateUrl: this.onChange,\n      submitUrl: this.onSubmit,\n      onIconClick: this.props.toggleCtrl,\n      activeCtrl: this.props.activeCtrl,\n      inputPlaceholder: 'Youtube | Vimeo | Twitch | DailyMotion'\n    }\n    return <Ctrl {...props} />\n  }\n}\n\nexport default VideoCtrl\n","import React from 'react'\nimport { QnALink as QnAIcon } from '../../icons/editor'\nimport { addNewBlock } from '../../model'\nimport { QNA_CTRL, Block } from '../../constants'\nimport { checkQnaEmbeds } from '../../utils/checkEmbeds'\nimport Ctrl from './Ctrl'\n\nclass QnACtrl extends React.Component {\n  state = {\n    url: ''\n  };\n\n  onChange = e => {\n    e.preventDefault()\n    this.setState({ url: e.target.value })\n  };\n\n  onSubmit = url => {\n    const editorState = this.props.getEditorState()\n    const newEditorState = addNewBlock(editorState, Block.QNA, { url })\n    this.props.setEditorState(newEditorState, this.props.onSubmit)\n  };\n\n  render() {\n    const { url } = this.state\n    const props = {\n      Icon: QnAIcon,\n      ctrlKey: QNA_CTRL,\n      urlIdentifier: 'url',\n      getEmbedUrl: checkQnaEmbeds,\n      url,\n      updateUrl: this.onChange,\n      submitUrl: this.onSubmit,\n      onIconClick: this.props.toggleCtrl,\n      activeCtrl: this.props.activeCtrl,\n      inputPlaceholder: 'StackExchange Community Question Link'\n    }\n    return <Ctrl {...props} />\n  }\n}\n\nexport default QnACtrl\n","import { IMAGE_CTRL, VIDEO_CTRL, LINK_CTRL, QNA_CTRL } from '../../constants'\nimport LinkCtrl from './LinkCtrl'\nimport ImageCtrl from './ImageCtrl'\nimport VideoCtrl from './VideoCtrl'\nimport QnACtrl from './QnACtrl'\n\nconst controls = {\n  [LINK_CTRL]: {\n    key: LINK_CTRL,\n    Component: LinkCtrl\n  },\n  [IMAGE_CTRL]: {\n    key: IMAGE_CTRL,\n    Component: ImageCtrl\n  },\n  [VIDEO_CTRL]: {\n    key: VIDEO_CTRL,\n    Component: VideoCtrl\n  },\n  [QNA_CTRL]: {\n    key: QNA_CTRL,\n    Component: QnACtrl\n  }\n}\n\nexport default controls\n","import React from 'react'\nimport styled from 'styled-components'\nimport controls from './controls'\n\nconst ControlsContainer = styled.div`\n  display: flex;\n  flex: 1;\n`\n\nclass SpecialControls extends React.Component {\n  state = {\n    activeCtrlKey: null,\n    url: ''\n  };\n  onUrlSubmit = () => {\n    this.setState({ activeCtrlKey: null })\n    const { editorRef } = this.props\n    editorRef && editorRef.focus()\n  };\n  setActiveCtrl = activeCtrlKey => {\n    this.setState({ activeCtrlKey }, () => {\n      this.urlInput && this.urlInput.focus()\n    })\n  };\n  renderControls = () => {\n    const { activeCtrlKey } = this.state\n    const { getEditorState, setEditorState } = this.props\n    return Object.entries(controls).map(([_, control]) => {\n      const { key, Component } = control\n      return (\n        <Component\n          key={key}\n          activeCtrl={activeCtrlKey}\n          toggleCtrl={e => {\n            e && e.preventDefault()\n            // toggle active control\n            if (activeCtrlKey) this.setActiveCtrl(null)\n            else this.setActiveCtrl(key)\n          }}\n          onSubmit={this.onUrlSubmit}\n          getEditorState={getEditorState}\n          setEditorState={setEditorState}\n        />\n      )\n    })\n  };\n  render() {\n    return <ControlsContainer>{this.renderControls()}</ControlsContainer>\n  }\n}\n\nexport default SpecialControls\n","import React from 'react'\nimport styled from 'styled-components'\nimport InlineStyleControls from './InlineCtrls'\nimport BlockTypeControls from './BlockCtrls'\nimport SpecialControls from './SpecialCtrls'\n\nconst Container = styled.div`\n  border: 1px solid #e0e0e0;\n  margin-bottom: 24px;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  position: relative;\n  position: sticky;\n  top: 38px;\n  background: #fff;\n  z-index: 300;\n`\nconst Separator = styled.div`\n  border-right: 1px solid #e0e0e0;\n  height: 24px;\n  margin: 0 8px;\n`\n\nconst Toolbar = ({ getEditorState, setEditorState, editorRef }) => {\n  return (\n    <Container>\n      <InlineStyleControls\n        getEditorState={getEditorState}\n        setEditorState={setEditorState}\n      />\n      <Separator />\n      <BlockTypeControls\n        editorRef={editorRef}\n        getEditorState={getEditorState}\n        setEditorState={setEditorState}\n      />\n      <Separator />\n      <SpecialControls\n        editorRef={editorRef}\n        getEditorState={getEditorState}\n        setEditorState={setEditorState}\n      />\n    </Container>\n  )\n}\n\nexport default Toolbar\n","import React from 'react'\nimport styled from 'styled-components'\nimport { EditorBlock } from 'draft-js'\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\nconst Img = styled.img`\n  max-width: 100%;\n  align-self: center;\n`\nconst Caption = styled.figcaption`\n  padding: 4px;\n  font-size: 13px;\n  font-family: roboto;\n  font-weight: 400;\n  color: #999;\n  position: relative;\n  border: none;\n  width: 100%;\n`\nconst CaptionPlaceholder = styled.div`\n  position: absolute;\n  text-align: center;\n  width: 100%;\n  color: #aaa;\n  font-weight: 300;\n  font-family: roboto;\n  z-index: 99;\n`\n\n// TODO: Add loader\nexport class ImageEmbed extends React.Component {\n  // state = {\n  //   captionWidth: 0\n  // };\n  // componentDidMount() {\n  //   this.setCaptionWidth();\n  // }\n  // setCaptionWidth = () => {\n  //   if (this.img && this.img.complete) {\n  //     const { width: imageWidth } = this.img.getBoundingClientRect();\n  //     this.setState({ captionWidth: imageWidth });\n  //   } else {\n  //     setTimeout(this.setCaptionWidth, 100);\n  //   }\n  // };\n  render() {\n    const data = this.props.block.get('data')\n    const blockText = this.props.block.getText()\n    const src = data.get('src')\n    const alt = data.get('alt')\n    const title = data.get('title') || alt\n    const { readOnly } = this.props.blockProps\n\n    return (\n      <Wrapper>\n        <Img\n          ref={el => {\n            this.img = el\n          }}\n          src={src}\n          alt={alt}\n          title={title}\n        />\n        <Caption>\n          {!readOnly &&\n            blockText.length === 0 && (\n              <CaptionPlaceholder\n                contentEditable=\"false\"\n                suppressContentEditableWarning\n              >\n                Add a Caption...\n              </CaptionPlaceholder>\n            )}\n          <EditorBlock\n            {...this.props}\n            contentEditable=\"false\"\n            suppressContentEditableWarning\n          />\n        </Caption>\n      </Wrapper>\n    )\n  }\n}\n","export default {\n  stackoverflow: import('./so-icon.svg'),\n  serverfault: import('./sf-icon.svg'),\n  superuser: import('./su-icon.png'),\n  security: import('./sec-icon.png'),\n  softwareengineering: import('./se-icon.png'),\n  askubuntu: import('./askubuntu.png'),\n  ux: import('./ux.png'),\n  unix: import('./unix.png'),\n  math: import('./math.png'),\n  apple: import('./apple.png'),\n  cstheory: import('./cstheory.png'),\n  android: import('./android.png'),\n  graphicdesign: import('./graphicdesign.png'),\n  dba: import('./dba.png'),\n  codereview: import('./codereview.png'),\n  cs: import('./cs.png')\n};\n","import React from 'react'\nimport styled from 'styled-components'\nimport { EditorBlock } from 'draft-js'\n// import { fetchQuestion } from '../../../../actions/question';\nimport communityIcons from '../../icons/community'\n\nconst Wrapper = styled.a`\n  background-color: #f7f7f7;\n  border: 1px solid #eee;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  text-decoration: none;\n  font-family: roboto;\n`\nconst Title = styled.div`\n  font-size: 24px;\n  font-weight: 300;\n  color: #333;\n  margin-bottom: 4px;\n`\nconst Link = styled.div`\n  position: relative;\n  color: #07c;\n  padding-bottom: 2px;\n  cursor: pointer;\n  font-size: 12px;\n  letter-spacing: 0.7px;\n`\nconst Tags = styled.div`\n  display: flex;\n  margin-top: 8px;\n`\nconst Tag = styled.div`\n  padding: 0 8px;\n  font-size: 12px;\n  background-color: #fff;\n  border-radius: 40px;\n  margin-right: 20px;\n  color: #222;\n  border: 1px solid rgba(246, 155, 85, 0.7);\n`\nconst FlexSection = props => {\n  const getFlexDirection = ({ vertical, horizontal }) => {\n    if (vertical) return 'column'\n    return 'row'\n  }\n  const Component = styled.div`\n    display: flex;\n    flex-direction: ${getFlexDirection};\n  `\n  return <Component {...props} />\n}\n\nclass CommunityLogo extends React.Component {\n  state = {\n    src: null\n  };\n  componentDidMount() {\n    const { site } = this.props\n    if (site) this.setSrc(site)\n  }\n  componentWillReceiveProps(nextProps) {\n    if (this.props.site !== nextProps.site) {\n      this.setSrc(nextProps.site)\n    }\n  }\n  setSrc = site => {\n    if (Object.keys(communityIcons).indexOf(site) !== -1) {\n      communityIcons[site].then(src => {\n        this.setState({ src })\n      })\n    }\n  };\n  render() {\n    const Component = styled.img`\n      max-height: 48px;\n      max-width: 48px;\n      margin-right: 6px;\n    `\n    return <Component src={this.state.src} />\n  }\n}\n\nconst OriginalPoster = ({ user }) => {\n  return <FlexSection />\n}\n\nclass QnA extends React.Component {\n  state = {\n    questionId: null\n  };\n  componentDidMount() {\n    const urlString = this.props.block.get('data').get('url')\n    this.props\n      .fetchQuestion(urlString)\n      .then(data => {\n        const { value: { question } } = data || { value: {} }\n        this.setState({ questionId: question.question_id })\n      })\n      .catch(console.error)\n  }\n  render() {\n    const { title, tags, link, owner, site } =\n      this.props.questions[this.state.questionId] || {}\n    return (\n      <div>\n        <Wrapper\n          href={link}\n          target=\"_blank\"\n          rel=\"noopener noreferer\"\n          contentEditable=\"false\"\n          suppressContentEditableWarning\n        >\n          <FlexSection horizontal>\n            <CommunityLogo site={site} />\n            <FlexSection vertical>\n              <Title>{title}</Title>\n              <Link>{link}</Link>\n              <Tags>{tags && tags.map(tag => <Tag key={tag}>{tag}</Tag>)}</Tags>\n            </FlexSection>\n            <OriginalPoster user={owner} />\n          </FlexSection>\n        </Wrapper>\n        <EditorBlock {...this.props} />\n      </div>\n    )\n  }\n}\n\n\nexport const QnAEmbed = QnA\n","import React from 'react'\nimport styled from 'styled-components'\nimport { EditorBlock } from 'draft-js'\n\n// Ref. https://www.h3xed.com/web-development/how-to-make-a-responsive-100-width-youtube-iframe-embed\nconst Wrapper = styled.div`\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n  border: 1px solid #e0e0e0;\n`\nconst IFrame = styled.iframe`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`\n\n// TODO: Add loader\nexport const VideoEmbed = props => {\n  const src = props.block.get('data').get('src')\n  return (\n    <div>\n      <Wrapper>\n        <IFrame title={src} src={src} frameBorder=\"0\" allowFullScreen />\n      </Wrapper>\n      <EditorBlock {...props} />\n    </div>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { EditorBlock } from 'draft-js'\n\nconst Quote = styled.div`\n  margin: 8px 0;\n  padding: 16px 0 16px 32px;\n  border-left: 3px solid rgb(246, 155, 85);\n  font-style: italic;\n  font-size: 24px;\n  font-weight: 300;\n  font-family: roboto;\n  letter-spacing: 1px;\n  line-height: 40px;\n  color: #555;\n`\n\nexport const Blockquote = props => {\n  return (\n    <Quote>\n      <EditorBlock {...props} />\n    </Quote>\n  )\n}\n","import { Link } from 'react-router-dom'\nimport styled from 'styled-components'\n\nexport const Wrapper = styled.div`\n  position: relative;\n`\nexport const Target = styled.div`\n  cursor: pointer;\n  display: flex;\n`\nexport const Img = styled.img`\n  height: 32px;\n  width: 32px;\n  border-radius: 100%;\n  border: 1px solid #ccc;\n`\nexport const Menu = styled.div`\n  position: absolute;\n  top: 40px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  background: #fff;\n  z-index: 199;\n  display: flex;\n  flex-direction: column;\n  ${props =>\n    props.alignRight &&\n    `\n    right: 0;\n    ${MenuItem} {\n      text-align: right;\n    };\n  `};\n`\nexport const MenuItem = styled(Link)`\n  cursor: pointer;\n  color: #555;\n  min-width: 80px;\n  padding: 8px;\n  text-decoration: none;\n  font-size: 14px;\n  &:hover {\n    color: #222;\n    background: #f5f5f5;\n  }\n  &:first-child {\n    margin-top: 8px;\n  }\n  &:last-child {\n    margin-bottom: 8px;\n  }\n`\nexport const LogoutButton = MenuItem.withComponent('div')\nexport const Tip = styled.div`\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  transform: rotate(135deg);\n  position: absolute;\n  bottom: -11px;\n  right: 24px;\n  background: #fff;\n  border-left: 1px solid;\n  border-bottom: 1px solid;\n  border-color: #ccc;\n  z-index: 1001;\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Wrapper, Menu as DefaultMenu, MenuItem, Tip } from './styled'\n\nclass Popper extends React.Component {\n  componentDidMount() {\n    document.addEventListener('click', e => {\n      if (this.popper && !this.popper.contains(e.target)) {\n        this.props.onClickOutside()\n      }\n    })\n  }\n  render() {\n    const {\n      isOpen,\n      target,\n      children,\n      showTip,\n      alignMenuRight,\n      Menu\n    } = this.props\n    return (\n      <Wrapper\n        className=\"popper-wrapper\"\n        ref={el => {\n          this.popper = el\n        }}\n      >\n        {target}\n        {showTip && isOpen && <Tip />}\n        {isOpen && (\n          <Menu onClick={this.props.onMenuClick} alignRight={alignMenuRight}>\n            {children}\n          </Menu>\n        )}\n      </Wrapper>\n    )\n  }\n}\n\nPopper.MenuItem = MenuItem\nPopper.Menu = DefaultMenu\n\nPopper.propTypes = {\n  children: PropTypes.node.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  target: PropTypes.node.isRequired,\n  showTip: PropTypes.bool,\n  onMenuClick: PropTypes.func,\n  onClickOutside: PropTypes.func,\n  Menu: PropTypes.any\n}\nPopper.defaultProps = {\n  showTip: false,\n  onMenuClick: () => {},\n  onClickOutside: () => {},\n  Menu: DefaultMenu\n}\n\nexport default Popper\n","import React from 'react'\nimport styled from 'styled-components'\nimport { updateDataOfBlock } from '../../model'\nimport Popper from '../Popper'\nimport { DEFAULT_CODEBLOCK_LANG } from '../../constants'\n\nconst SUPPORTED_LANGS = {\n  html: 'HTML',\n  css: 'CSS',\n  javascript: 'Javascript',\n  jsx: 'Babel JSX',\n  python: 'Python',\n  json: 'JSON',\n  scala: 'Scala',\n  clike: 'C/C++',\n  java: 'Java',\n  go: 'go',\n  php: 'PHP',\n  text: 'PlainText'\n}\n\nconst Container = styled.div`\n  background: #272822;\n  border-radius: 4px;\n  position: relative;\n  border: 1px solid #ddd;\n  padding-bottom: 16px;\n  margin: 12px 0;\n`\nconst MenuBar = styled.div`\n  display: flex;\n  position: relative;\n  justify-content: space-between;\n`\nconst CustomMenu = styled(Popper.Menu)`\n  background: #45453f;\n  border: none;\n`\nconst CurrentLang = styled.div`\n  color: #878787;\n  font-size: 16px;\n  padding: 0.5em 1em;\n  font-weight: 300;\n  letter-spacing: 1px;\n  font-family: roboto;\n`\nconst LangSelectButton = props => {\n  const Btn = styled.div`\n    background: #fff2;\n    padding: 8px;\n    cursor: pointer;\n    border-radius: 2px;\n    top: 0;\n    right: 8px;\n    z-index: 999;\n    font-family: roboto;\n    font-size: 12px;\n    color: #bbb;\n  `\n  return <Btn {...props}>Set Language &#8964;</Btn>\n}\nconst LangSelectItem = props => {\n  const { children, ...restProps } = props\n  const { MenuItem } = Popper\n  const Item = styled(MenuItem)`\n    padding: 2px 8px;\n    background: #45453f;\n    border-radius: 2px;\n    z-index: 999;\n    cursor: pointer;\n    font-family: roboto;\n    font-size: 12px;\n    color: #bbb;\n  `.withComponent('div')\n  return <Item {...restProps}>{children}</Item>\n}\n\nexport class CodeBlockWrapper extends React.Component {\n  state = {\n    langPopperIsOpen: false,\n    currentSyntax: DEFAULT_CODEBLOCK_LANG\n  };\n\n  componentDidMount() {\n    const [firstBlockKey] = React.Children.map(\n      this.props.children,\n      child => child.props.children.key\n    )\n    const editorState = this.props.getEditorState()\n    const block = editorState.getCurrentContent().getBlockForKey(firstBlockKey)\n    const currentSyntax = block.getData().get('syntax')\n    if (currentSyntax) {\n      this.setState({ currentSyntax })\n    }\n  }\n\n  toggleLangPopper = e => {\n    e.preventDefault()\n    this.setState({ langPopperIsOpen: !this.state.langPopperIsOpen })\n  };\n\n  closeLangPopper = () => {\n    this.setState({ langPopperIsOpen: false })\n  };\n\n  setSyntax = syntax => e => {\n    e.preventDefault()\n    this.setState({\n      langPopperIsOpen: false,\n      currentSyntax: syntax\n    }, () => {\n      if (syntax === 'text') {\n        syntax = null\n      }\n      const blockKeys = React.Children.map(\n        this.props.children,\n        child => child.props.children.key\n      )\n      const editorState = this.props.getEditorState()\n      let newEditorState = editorState\n      blockKeys.forEach(blockKey => {\n        const block = editorState.getCurrentContent().getBlockForKey(blockKey)\n        newEditorState = updateDataOfBlock(newEditorState, block, { syntax })\n      })\n      this.props.setEditorState(newEditorState)\n    })\n  };\n\n  render() {\n    const { children, readOnly, ...restProps } = this.props\n    const target = (\n      <LangSelectButton\n        onMouseDown={this.toggleLangPopper}\n        contentEditable=\"false\"\n        suppressContentEditableWarning\n      />\n    )\n    const langSelect = (\n      <Popper\n        isOpen={this.state.langPopperIsOpen}\n        target={target}\n        onClickOutside={this.closeLangPopper}\n        alignMenuRight={true}\n        Menu={CustomMenu}\n      >\n        {Object.entries(SUPPORTED_LANGS).map(([lang, langDisplay]) => {\n          return (\n            <LangSelectItem key={lang} onMouseDown={this.setSyntax(lang)}>\n              {langDisplay}\n            </LangSelectItem>\n          )\n        })}\n      </Popper>\n    )\n    return (\n      <Container {...restProps}>\n        <MenuBar>\n          <CurrentLang contentEditable=\"false\" suppressContentEditableWarning>\n            {SUPPORTED_LANGS[this.state.currentSyntax]}\n          </CurrentLang>\n          {!readOnly && langSelect}\n        </MenuBar>\n        {children}\n      </Container>\n    )\n  }\n}\n","import {\n  QnAEmbed,\n  VideoEmbed,\n  ImageEmbed,\n  Blockquote\n} from '../components/blocks'\nimport { Block } from '../constants'\n\nconst getBlockRendererFn = ({ readOnly }) => contentBlock => {\n  const type = contentBlock.getType()\n  if (type === Block.QNA) {\n    return {\n      component: QnAEmbed,\n      editable: !readOnly,\n      props: {}\n    }\n  } else if (type === Block.VIDEO) {\n    return {\n      component: VideoEmbed,\n      editable: !readOnly,\n      props: {}\n    }\n  } else if (type === Block.IMAGE) {\n    return {\n      component: ImageEmbed,\n      editable: !readOnly,\n      props: { readOnly }\n    }\n  } else if (type === Block.BLOCKQUOTE) {\n    return {\n      component: Blockquote,\n      editable: !readOnly,\n      props: {}\n    }\n  }\n}\n\nexport default getBlockRendererFn\n","import React from 'react'\nimport { DefaultDraftBlockRenderMap } from 'draft-js'\nimport { Map as ImmutableMap } from 'immutable'\nimport { Block } from '../constants'\nimport { CodeBlockWrapper } from '../components/blocks'\n\nconst getBlockRenderMap = ({ getEditorState, setEditorState, readOnly }) =>\n  DefaultDraftBlockRenderMap.merge(\n    ImmutableMap({\n      [Block.BLOCKQUOTE]: {\n        element: 'div'\n      },\n      [Block.ATOMIC]: {\n        element: 'div'\n      },\n      [Block.CODE]: {\n        element: 'pre',\n        wrapper: (\n          <CodeBlockWrapper\n            readOnly={readOnly}\n            getEditorState={getEditorState}\n            setEditorState={setEditorState}\n          />\n        )\n      }\n    })\n  )\n\nexport default getBlockRenderMap\n","import { Block } from '../constants'\n\nconst BASE_BLOCK_CLASS = 'sc-block'\n\nexport default block => {\n  switch (block.getType()) {\n  case Block.IMAGE:\n    return `${BASE_BLOCK_CLASS} ${BASE_BLOCK_CLASS}-image`\n  default:\n    return BASE_BLOCK_CLASS\n  }\n}\n","import React from 'react'\nimport { OrderedMap } from 'immutable'\nimport {\n  Editor,\n  EditorState,\n  RichUtils,\n  ContentBlock,\n  Modifier,\n  genKey\n} from 'draft-js'\nimport isSoftNewlineEvent from 'draft-js/lib/isSoftNewlineEvent'\nimport styled from 'styled-components'\nimport 'draft-js/dist/Draft.css'\nimport Toolbar from './Toolbar'\nimport getBlockRendererFn from './utils/getBlockRendererFn'\nimport getBlockRenderMap from './utils/getBlockRenderMap'\nimport blockStyleFn from './utils/blockStyleFn'\nimport checkEmbeds from './utils/checkEmbeds'\nimport { Block, HANDLED, NOT_HANDLED } from './constants'\nimport { getCurrentBlock, resetBlockWithType, addNewBlockAt } from './model'\nimport './components/blocks/image.css'\nimport './components/blocks/block.css'\nimport './editor.css'\n\nconst Container = styled.div`\n  font-size: 16px;\n  line-height: 26px;\n`\n\nclass CustomEditor extends React.Component {\n  getEditorState = () => this.props.editorState;\n\n  handleKeyCommand = (command, editorState) => {\n    const newState = RichUtils.handleKeyCommand(editorState, command)\n    if (newState) {\n      this.props.onChange(newState)\n      return true\n    }\n    return false\n  };\n\n  onUpArrow = e => {\n    const { editorState } = this.props\n    const content = editorState.getCurrentContent()\n    const selection = editorState.getSelection()\n    const key = selection.getAnchorKey()\n    const currentBlock = content.getBlockForKey(key)\n    const firstBlock = content.getFirstBlock()\n    if (firstBlock.getKey() === key) {\n      const firstBlockType = firstBlock.getType()\n      if (\n        firstBlockType.indexOf(Block.ATOMIC) === 0 ||\n        firstBlockType === Block.CODE\n      ) {\n        e.preventDefault()\n        const newBlock = new ContentBlock({\n          type: 'unstyled',\n          key: genKey()\n        })\n        const newBlockMap = OrderedMap([[newBlock.getKey(), newBlock]]).concat(\n          content.getBlockMap()\n        )\n        const newContent = content.merge({\n          blockMap: newBlockMap,\n          selectionAfter: selection.merge({\n            anchorKey: newBlock.getKey(),\n            focusKey: newBlock.getKey(),\n            anchorOffset: 0,\n            focusOffset: 0,\n            isBackward: false\n          })\n        })\n        this.props.onChange(\n          EditorState.push(editorState, newContent, 'insert-characters')\n        )\n      }\n    } else if (currentBlock.getType().indexOf(Block.ATOMIC) === 0) {\n      const blockBefore = content.getBlockBefore(key)\n      if (!blockBefore) {\n        return\n      }\n      e.preventDefault()\n      const newSelection = selection.merge({\n        anchorKey: blockBefore.getKey(),\n        focusKey: blockBefore.getKey(),\n        anchorOffset: blockBefore.getLength(),\n        focusOffset: blockBefore.getLength(),\n        isBackward: false\n      })\n      this.props.onChange(\n        EditorState.forceSelection(editorState, newSelection)\n      )\n    }\n  };\n\n  handleReturn = e => {\n    if (this.props.handleReturn) {\n      const behavior = this.props.handleReturn()\n      if (behavior === HANDLED || behavior === true) {\n        return HANDLED\n      }\n    }\n    const { editorState } = this.props\n    if (isSoftNewlineEvent(e)) {\n      this.props.onChange(RichUtils.insertSoftNewline(editorState))\n      return HANDLED\n    }\n    if (!e.altKey && !e.metaKey && !e.ctrlKey) {\n      const currentBlock = getCurrentBlock(editorState)\n      const blockType = currentBlock.getType()\n\n      if (blockType.indexOf(Block.ATOMIC) === 0 || blockType === Block.QNA) {\n        this.props.onChange(addNewBlockAt(editorState, currentBlock.getKey()))\n        return HANDLED\n      }\n\n      // Pass syntax data to newly added block\n      // TODO: split block instead of adding new blank one (https://github.com/facebook/draft-js/issues/723)\n      if (blockType === Block.CODE) {\n        this.props.onChange(\n          addNewBlockAt(\n            editorState,\n            currentBlock.getKey(),\n            Block.CODE,\n            currentBlock.getData()\n          )\n        )\n        return HANDLED\n      }\n\n      if (currentBlock.getLength() === 0) {\n        switch (blockType) {\n        case Block.UL:\n        case Block.OL:\n        case Block.BLOCKQUOTE:\n        case Block.BLOCKQUOTE_CAPTION:\n        case Block.CAPTION:\n        case Block.H2:\n        case Block.H3:\n        case Block.H1:\n          this.props.onChange(\n            resetBlockWithType(editorState, Block.UNSTYLED)\n          )\n          return HANDLED\n        default:\n          return NOT_HANDLED\n        }\n      }\n\n      const selection = editorState.getSelection()\n\n      if (\n        selection.isCollapsed() &&\n        currentBlock.getLength() === selection.getStartOffset()\n      ) {\n        if (this.props.continuousBlocks.indexOf(blockType) < 0) {\n          this.props.onChange(\n            addNewBlockAt(editorState, currentBlock.getKey())\n          )\n          return HANDLED\n        }\n        return NOT_HANDLED\n      }\n      return NOT_HANDLED\n    }\n    return NOT_HANDLED\n  };\n\n  handlePastedText = (text, html, es) => {\n    const { editorState } = this.props\n    const currentBlock = getCurrentBlock(editorState)\n    const blockType = currentBlock.getType()\n    if (blockType === Block.IMAGE) {\n      const content = editorState.getCurrentContent()\n      this.props.onChange(\n        EditorState.push(\n          editorState,\n          Modifier.insertText(content, editorState.getSelection(), text)\n        )\n      )\n      return HANDLED\n    } else if (blockType === Block.UNSTYLED) {\n      const { matched, blockType: newBlockType, data } = checkEmbeds(text)\n      if (matched) {\n        const newEditorState = resetBlockWithType(editorState, newBlockType, {\n          data\n        })\n        this.props.onChange(newEditorState)\n        return HANDLED\n      }\n    }\n    if (\n      this.props.handlePastedText &&\n      this.props.handlePastedText(text, html, es) === HANDLED\n    ) {\n      return HANDLED\n    }\n    return NOT_HANDLED\n  };\n\n  toggleBlockType = (blockType) => {\n    this.props.onChange(\n      RichUtils.toggleBlockType(\n        this.state.editorState,\n        blockType\n      )\n    )\n  }\n\n  render() {\n    const { editorState, onChange, readOnly } = this.props\n    return (\n      <Container>\n        {!readOnly && (\n          <Toolbar\n            getEditorState={this.getEditorState}\n            setEditorState={onChange}\n            editorRef={this.editor}\n          />\n        )}\n        <Editor\n          ref={editor => {\n            this.editor = editor\n          }}\n          placeholder=\"Share your story here...\"\n          editorState={editorState}\n          handleKeyCommand={this.handleKeyCommand}\n          onUpArrow={this.onUpArrow}\n          onChange={onChange}\n          handleReturn={this.handleReturn}\n          handlePastedText={this.handlePastedText}\n          blockRendererFn={getBlockRendererFn({ readOnly })}\n          blockRenderMap={getBlockRenderMap({\n            getEditorState: this.getEditorState,\n            setEditorState: onChange,\n            readOnly\n          })}\n          blockStyleFn={blockStyleFn}\n          readOnly={readOnly}\n        />\n      </Container>\n    )\n  }\n}\n\nCustomEditor.defaultProps = {\n  readOnly: false,\n  continuousBlocks: [\n    Block.UNSTYLED,\n    Block.BLOCKQUOTE,\n    Block.OL,\n    Block.UL,\n    Block.CODE,\n    Block.TODO\n  ]\n}\n\nexport default CustomEditor\n","import Editor from './editor'\n\nexport { createEditorState } from './model'\nexport default Editor\n","import _ from 'lodash'\nimport { Link } from 'react-router-dom'\nimport { convertToRaw } from 'draft-js'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Input, Spinner } from 'reactstrap'\nimport styled from 'styled-components'\nimport readingTime from 'reading-time'\nimport Editor, { createEditorState } from '../Editor'\n\nconst wait = (ms) => new Promise((resolve) => {\n  setTimeout(() => {\n    resolve()\n  }, ms)\n})\n\nconst Container = styled.div`\n  margin: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`\nconst Wrapper = styled.div`\n  width: 920px;\n`\nconst CoverImagePreview = styled.img`\n  margin-left: -52px;\n`\nconst Toolbar = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  top: 0;\n  position: sticky;\n  background: #fff;\n  border-radius: 4px;\n  z-index: 999;\n`\nconst FormFeedback = styled.div`\n  font-weight: bold;\n  color: ${({ error }) => {\n    if (error) {\n      return '#d63737'\n    }\n    return '#28a745'\n  }};\n`\nconst Content = ({ children }) => (\n  <Wrapper>\n    {\n      React.Children\n        .toArray(children)\n        .map(child => React.cloneElement(child, {\n          style: { marginBottom: '12px' }\n        }))\n    }\n  </Wrapper>\n)\n\nclass PostEditor extends React.Component {\n  state = {\n    saving: false,\n    saved: false,\n    saveError: '',\n    publishing: false,\n    published: false,\n    publishError: '',\n    unpublishing: false,\n    unpublished: false,\n    unpublishError: ''\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleShortcuts)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleShortcuts)\n  }\n\n  handleShortcuts = async (e) => {\n    if (e.metaKey && e.key === 's') {\n      e.preventDefault()\n      e.stopPropagation()\n      await this.save()\n    }\n    if (e.metaKey && e.ctrlKey && e.key === 'p') {\n      e.preventDefault()\n      e.stopPropagation()\n      await this.publish()\n    }\n  }\n\n  save = async () => {\n    try {\n      this.setState({ saving: true })\n      const { onSave, afterSave, editorState, title, summary, coverImageUrl } = this.props\n      const plainText = editorState.getCurrentContent().getPlainText()\n      const ttr = readingTime(plainText)\n      const body = convertToRaw(editorState.getCurrentContent())\n      const response = await onSave({ title, summary, body, coverImageUrl, ttr })\n      this.setState({ saving: false, saved: true }, async () => {\n        await wait(2000)\n        this.setState({ saved: false })\n      })\n      await afterSave(response)\n    } catch(err) {\n      console.error(err)\n      const defaultErrMsg = 'Some unknown error occured'\n      const newState = {\n        saved: false,\n        saving: false,\n        saveError: err.message || defaultErrMsg\n      }\n      this.setState(newState, async () => {\n        await wait(2000)\n        this.setState({ saveError: '' })\n      })\n    }\n  }\n\n  publish = async () => {\n    try {\n      this.setState({ publishing: true })\n      const { onPublish } = this.props\n      await onPublish()\n      this.setState({ publishing: false, published: true }, async () => {\n        await wait(2000)\n        this.setState({ published: false })\n      })\n    } catch(err) {\n      console.error(err)\n      const defaultErrMsg = 'Some unknown error occured'\n      const newState = {\n        published: false,\n        publishing: false,\n        publishError: err.message || defaultErrMsg\n      }\n      this.setState(newState, async () => {\n        await wait(2000)\n        this.setState({ publishError: '' })\n      })\n    }\n  }\n\n  unpublish = async () => {\n    try {\n      this.setState({ unpublishing: true })\n      const { onUnpublish } = this.props\n      await onUnpublish()\n      this.setState({ unpublishing: false, unpublished: true }, async () => {\n        await wait(2000)\n        this.setState({ unpublished: false })\n      })\n    } catch(err) {\n      console.error(err)\n      const defaultErrMsg = 'Some unknown error occured'\n      const newState = {\n        unpublished: false,\n        unpublishing: false,\n        unpublishError: err.message || defaultErrMsg\n      }\n      this.setState(newState, async () => {\n        await wait(2000)\n        this.setState({ unpublishError: '' })\n      })\n    }\n  }\n\n  render() {\n    const { title, summary, coverImageUrl, editorState, onTitleChange, onSummaryChange, onEditorChange, onCoverChange } = this.props\n    const { saving, saved, saveError, publishing, published, publishError, unpublishing, unpublished, unpublishError } = this.state\n    console.log(coverImageUrl, typeof coverImageUrl)\n    return (\n      <Container>\n        <Content>\n          <Toolbar>\n            <Link to=\"/admin\" style={{ color: '#222', textDecoration: 'none' }}>\n              <Button color=\"warning\">\n                &lt; Back\n              </Button>\n            </Link>\n            {\n              (saving === true) && (\n                <FormFeedback>\n                  <Spinner size=\"sm\" color=\"success\" />{' '}\n                  Saving...\n                </FormFeedback>\n              )\n            }\n            {\n              (saved === true) && (\n                <FormFeedback>\n                  <span role=\"img\" aria-label=\"thumbs-up\"></span> Saved Successfully\n                </FormFeedback>\n              )\n            }\n            {\n              (saveError.length > 0) && (\n                <FormFeedback error>\n                  {saveError}\n                </FormFeedback>\n              )\n            }\n            {\n              (publishing === true) && (\n                <FormFeedback>\n                  <Spinner size=\"sm\" color=\"success\" />{' '}\n                  Publishing...\n                </FormFeedback>\n              )\n            }\n            {\n              (published === true) && (\n                <FormFeedback>\n                  <span role=\"img\" aria-label=\"thumbs-up\"></span> Published Successfully\n                </FormFeedback>\n              )\n            }\n            {\n              (publishError.length > 0) && (\n                <FormFeedback error>\n                  {publishError}\n                </FormFeedback>\n              )\n            }\n            {\n              (unpublishing === true) && (\n                <FormFeedback>\n                  <Spinner size=\"sm\" color=\"success\" />{' '}\n                  Unpublishing...\n                </FormFeedback>\n              )\n            }\n            {\n              (unpublished === true) && (\n                <FormFeedback>\n                  <span role=\"img\" aria-label=\"thumbs-up\"></span> Unpublished Successfully\n                </FormFeedback>\n              )\n            }\n            {\n              (unpublishError.length > 0) && (\n                <FormFeedback error>\n                  {unpublishError}\n                </FormFeedback>\n              )\n            }\n            <div style={{ display: 'flex' }}>\n              <Button onClick={this.save} color=\"primary\" style={{ marginRight: '4px' }}>\n                Save\n              </Button>\n              <Button onClick={this.publish} color=\"success\" style={{ marginRight: '4px' }}>\n                Publish\n              </Button>\n              <Button onClick={this.unpublish} color=\"danger\">\n                Unpublish\n              </Button>\n            </div>\n          </Toolbar>\n          <Input\n            type=\"text\"\n            placeholder=\"Cover Image Url\"\n            value={coverImageUrl}\n            onChange={onCoverChange}\n          />\n          {\n            (_.isString(coverImageUrl) && (coverImageUrl.length > 0)) && (\n              <CoverImagePreview src={coverImageUrl} alt=\"post cover\" />\n            )\n          }\n          <Input\n            type=\"text\"\n            placeholder=\"Title\"\n            value={title}\n            onChange={onTitleChange}\n          />\n          <Input\n            type=\"textarea\"\n            placeholder=\"Summary\"\n            rows={4}\n            value={summary}\n            onChange={onSummaryChange}\n          />\n          <Editor\n            onChange={onEditorChange}\n            editorState={editorState}\n          />\n        </Content>\n      </Container>\n    )\n  }\n}\nPostEditor.defaultProps = {\n  afterSave: () => {},\n  editorState: createEditorState(),\n  title: '',\n  summary: ''\n}\nPostEditor.propTypes = {\n  onSave: PropTypes.func.isRequired,\n  onPublish: PropTypes.func.isRequired,\n  onUnpublish: PropTypes.func.isRequired,\n  afterSave: PropTypes.func,\n  onEditorChange: PropTypes.func.isRequired,\n  onTitleChange: PropTypes.func.isRequired,\n  onSummaryChange: PropTypes.func.isRequired,\n  onCoverChange: PropTypes.func.isRequired,\n  editorState: PropTypes.object,\n  title: PropTypes.string,\n  summary: PropTypes.string\n}\n\nexport default PostEditor\n","import _ from 'lodash'\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport axios from 'axios'\nimport PostEditor from '../PostEditor'\nimport { createEditorState } from '../Editor'\n\nclass NewPost extends React.Component {\n  state = {\n    title: '',\n    editorState: createEditorState()\n  }\n\n  onEditorChange = (editorState) => this.setState({ editorState })\n  onTitleChange = (e) => this.setState({ title: e.target.value })\n\n  onSave = ({ title, body }) => {\n    const url = 'http://localhost:4000/api/dpksh/posts'\n    return axios.post(url, { title, body })\n  }\n\n  afterSave = async (response) => {\n    const { history } = this.props\n    const id = _.get(response, 'data.id')\n    const body = _.get(response, 'data.body')\n    const title = _.get(response, 'data.title')\n    const url = `/admin/posts/${id}/edit`\n    history.push(url, { title, body })\n  }\n\n  render() {\n    const { title, editorState } = this.state\n    return (\n      <PostEditor\n        title={title}\n        editorState={editorState}\n        onEditorChange={this.onEditorChange}\n        onTitleChange={this.onTitleChange}\n        onSave={this.onSave}\n        afterSave={this.afterSave}\n      />\n    )\n  }\n}\n\nexport default withRouter(NewPost)\n","import _ from 'lodash'\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport axios from 'axios'\nimport PostEditor from '../PostEditor'\nimport { createEditorState } from '../Editor'\n\nclass EditPost extends React.Component {\n  state = {\n    title: '',\n    summary: '',\n    editorState: createEditorState()\n  }\n\n  onEditorChange = (editorState) => this.setState({ editorState })\n  onTitleChange = (e) => this.setState({ title: e.target.value })\n  onSummaryChange = (e) => this.setState({ summary: e.target.value })\n  onCoverChange = (e) => this.setState({ coverImageUrl: e.target.value })\n\n  async componentDidMount() {\n    const { match } = this.props\n    const response = await axios.get(`http://localhost:4000/api/dpksh/posts/${match.params.id}`)\n    const data = _.get(response, 'data')\n    const body = _.get(data, 'body')\n    delete data.body\n    const editorState = createEditorState(body)\n    this.setState({ ...data, editorState })\n  }\n\n  onSave = async (data) => {\n    const { match } = this.props\n    const url = `http://localhost:4000/api/dpksh/posts/${match.params.id}`\n    await axios.patch(url, data)\n  }\n\n  onPublish = async () => {\n    const { match } = this.props\n    const url = `http://localhost:4000/api/dpksh/posts/${match.params.id}/publish`\n    await axios.post(url)\n  }\n\n  onUnpublish = async () => {\n    const { match } = this.props\n    const url = `http://localhost:4000/api/dpksh/posts/${match.params.id}/unpublish`\n    await axios.post(url)\n  }\n\n  render() {\n    const { title, summary, coverImageUrl, editorState } = this.state\n    return (\n      <PostEditor\n        title={title}\n        summary={summary}\n        coverImageUrl={coverImageUrl}\n        editorState={editorState}\n        onEditorChange={this.onEditorChange}\n        onTitleChange={this.onTitleChange}\n        onSummaryChange={this.onSummaryChange}\n        onCoverChange={this.onCoverChange}\n        onSave={this.onSave}\n        onPublish={this.onPublish}\n        onUnpublish={this.onUnpublish}\n      />\n    )\n  }\n}\n\nexport default withRouter(EditPost)\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  width: 100%;\n  height: 400px;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n`\nconst Image = styled.img`\n  max-width: 1024px;\n  z-index: -10;\n`\n\nconst CoverImage = ({ url }) => (\n  <Container>\n    <Image src={url} />\n  </Container>\n)\n\nexport default CoverImage\n","import _ from 'lodash'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { Clock } from 'styled-icons/evil/Clock'\nimport Editor, { createEditorState } from '../Editor'\nimport Cover from './Cover'\nimport Topbar from '../Topbar'\n\nconst Container = styled.div``\nconst Wrapper = styled.div`\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\nconst Body = styled.div`\n  max-width: 920px;\n`\nconst Header = styled.div`\n  margin: 40px 0;\n`\nconst Title = styled.div`\n  font-weight: bold;\n  font-size: 48px;\n  text-align: center;\n`\nconst Subtitle = styled.div`\n  font-size: 16px;\n  text-align: center;\n`\nconst Content = styled.div`\n  font-size: 24px;\n  padding: 0 20px;\n`\n\nclass ViewPost extends React.Component {\n  state = {\n    post: {}\n  }\n\n  async componentDidMount() {\n    this.setState({\n      post: await this.getCurrentPost()\n    })\n    window.scrollTo(0, 0)\n  }\n\n  getCurrentPost = async () => {\n    try {\n      const { params } = this.props.match\n      const postId = _.get(params, 'id')\n      const post = _.assign({}, (await import(`../../data/posts/${postId}.json`)).default)\n      post.body = createEditorState(post.body)\n      return post\n    } catch(err) {\n      console.error(err)\n      return {}\n    }\n  }\n\n  render() {\n    const { post } = this.state\n    let content = (\n      <Wrapper>\n        Loading...\n      </Wrapper>\n    )\n    if (!_.isEmpty(post)) {\n      content = (\n        <Wrapper>\n          {\n            post.coverImageUrl && (\n              <Cover url={post.coverImageUrl} />\n            )\n          }\n          <Body>\n            <Header>\n              <Title>\n                {post.title}\n              </Title>\n              <Subtitle>\n                <Clock size=\"20px\" />{_.get(post, 'ttr.text', '')}\n              </Subtitle>\n            </Header>\n            <Content>\n              <Editor\n                readOnly={true}\n                editorState={post.body}\n              />\n            </Content>\n          </Body>\n        </Wrapper>\n      )\n    }\n    return (\n      <Container>\n        <Topbar />\n        {content}\n      </Container>\n    )\n  }\n}\n\nexport default withRouter(ViewPost)\n","import _ from 'lodash'\nimport React from 'react'\nimport axios from 'axios'\nimport { withRouter, Link } from 'react-router-dom'\nimport { Container, Button } from 'reactstrap'\nimport styled from 'styled-components'\nimport { Delete } from 'styled-icons/feather/Delete'\nimport config from '../../config'\nimport PostListItem from '../common/PostListItem'\n\nconst Heading = styled.div`\n  display: flex;\n  align-items: center;\n`\nconst DeletePost = styled(Delete)`\n  cursor: pointer;\n  margin-bottom: -6px;\n  &:hover {\n    color: red;\n  }\n`\n\nclass PostList extends React.Component {\n  state = {\n    posts: []\n  }\n\n  async componentDidMount() {\n    await this.fetchPosts()\n  }\n\n  fetchPosts = async () => {\n    const response = await axios.get(config.apiUrl + '/posts')\n    const posts = _.get(response, 'data.items')\n    this.setState({ posts })\n  }\n\n  triggerEditPost = (id) => () => {\n    const { history } = this.props\n    const url = '/admin/posts/' + id + '/edit'\n    history.push(url)\n  }\n\n  confirmDeletePost = () => window.confirm('This action will permanently delete this post. Press OK if you want to proceed.');\n  deletePost = (id) => async () => {\n    const consented = this.confirmDeletePost()\n    if (consented) {\n      await axios.delete(config.apiUrl + '/posts/' + id)\n      this.setState(state => ({\n        posts: state.posts.filter(post => post.id !== id)\n      }))\n    }\n  }\n\n  confirmPublishAll = () => window.confirm('This action will publish all the posts. Press OK if you want to proceed.');\n  publishAll = async () => {\n    const consented = this.confirmPublishAll()\n    if (consented) {\n      await axios.post(config.apiUrl + '/posts/publish_all')\n      await this.fetchPosts()\n    }\n  }\n\n  render() {\n    const { posts } = this.state\n    if (!posts) {\n      return null\n    }\n    return (\n      <Container style={{ padding: '40px 0' }}>\n        <Link to=\"/admin/new\" style={{ color: 'white', textDecoration: 'none', fontWeight: 'bold', marginRight: '4px' }}>\n          <Button color=\"success\">\n            Create a new Post\n          </Button>\n        </Link>\n        <Button color=\"danger\" onClick={this.publishAll}>\n          Publish All\n        </Button>\n        {\n          posts.map((post, i) => (\n            <PostListItem key={i}>\n              <Heading>\n                <PostListItem.Title onClick={this.triggerEditPost(post.id)}>\n                  {post.title} &nbsp;\n                </PostListItem.Title>\n                <DeletePost size=\"30\" onClick={this.deletePost(post.id)} title=\"Delete Post\" />\n              </Heading>\n              <PostListItem.Subtitle>\n                {_.get(post, 'ttr.text')} -\n                {` `}{_.get(post, 'status')}\n              </PostListItem.Subtitle>\n              <PostListItem.Summary>\n                {post.summary}\n              </PostListItem.Summary>\n            </PostListItem>\n          ))\n        }\n      </Container>\n    )\n  }\n}\n\nexport default withRouter(PostList)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport App from './components/App'\nimport Home from './components/Home'\nimport NewPost from './components/NewPost'\nimport EditPost from './components/EditPost'\nimport ViewPost from './components/ViewPost'\nimport PostList from './components/PostList'\n\nexport default (\n  <App>\n    <Switch>\n      <Route exact path=\"/\" component={Home} />\n      <Route exact path=\"/admin\" component={PostList} />\n      <Route exact path=\"/admin/new\" component={NewPost} />\n      <Route exact path=\"/admin/posts/:id/edit\" component={EditPost} />\n      <Route exact path=\"/:id\" component={ViewPost} />\n    </Switch>\n  </App>\n)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport './index.css'\nimport routes from './routes'\nimport * as serviceWorker from './serviceWorker'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nconst app = (\n  <BrowserRouter>\n    {routes}\n  </BrowserRouter>\n)\n\nReactDOM.render(app, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import _ from 'lodash'\nimport defaultConfig from './default'\n\nconst env = process.env.NODE_ENV\n\nlet envConfig = {}\ntry {\n  envConfig = require(`./${_.toLower(env)}`).default\n} catch (err) {\n  // ignore\n}\n\nexport default _.merge({}, defaultConfig, envConfig)\n","export default {\n  apiUrl: 'http://localhost:4000/api/dpksh'\n}\n"],"sourceRoot":""}